window.BDD_MSS = [
  {
    sigle: "An",
    msId: "angers-mt-368",
    kind: "additional"
  },
  {
    sigle: "As",
    msId: "assisi-bc-cl-227",
    kind: "additional"
  },
  {
    sigle: "Au",
    msId: "augsburg-ub-cod-1-2-2-42",
    kind: "additional"
  },
  {
    sigle: "B",
    msId: "bamberg-sb-c-6",
    kind: "core",
    manifestId: "../data/manifests/bamberg-sb-c-6.json",
    uiGroup: "Bamberg",
    citationLabel: "Bamberg, Staatsbibliothek, Can. 6",
    // books actually available
    books: ["01", "06", "07", "13"]
  },
  {
    sigle: "Bo",
    msId: "bologna-bu-2239",
    kind: "additional"
  },
  {
    sigle: "Bo2",
    msId: "bologna-cs-37",
    kind: "additional"
  },
  {
    sigle: "Bo3",
    msId: "bologna-bu-2599",
    kind: "additional"
  },
  {
    sigle: "Br",
    msId: "bruessel-brb-3819-20",
    kind: "additional"
  },
  {
    sigle: "Bu",
    msId: "burgo-bsic-157",
    kind: "additional"
  },
  {
    sigle: "C",
    msId: "chartres-ma-161",
    kind: "additional"
  },
  {
    sigle: "Co",
    msId: "cortona-bc-75",
    kind: "additional"
  },
  {
    sigle: "Du",
    msId: "durham-cl-b-IV-17",
    kind: "additional"
  },
  {
    sigle: "E",
    msId: "eichstaett-ub-c-s-772",
    kind: "additional"
  },
  {
    sigle: "Es",
    msId: "escorial-rb-t-i-14",
    kind: "additional"
  },
  
  {
    sigle: "Fl1",
    msId: "florenz-bml-c-11",
    kind: "additional"
  },
  {
    sigle: "Fl2",
    msId: "florenz-bml-p-16-21",
    kind: "additional"
  },
  {
    sigle: "Fl3",
    msId: "florenz-bnc-c-s-f-IV-255",
    kind: "additional"
  },
  {
    sigle: "Fl4",
    msId: "florenz-br-240",
    kind: "additional"
  },
  {
    sigle: "Fl5",
    msId: "florenz-bml-plut-VII",
    kind: "additional"
  },
  {
    sigle: "Fl6",
    msId: "florenz-bnc-csc-1-2777",
    kind: "additional"
  },
  {
    sigle: "F",
    msId: "frankfurt-ub-b-50",
    kind: "core",
    manifestId: "../data/manifests/frankfurt-ub-b-50-manifest.json",
    uiGroup: "Frankfurt", 
    citationLabel: "Frankfurt am Main, Universitätsbibliothek Johann Christian Senckenberg, Barth. 50",
    // books actually available
    books: ["01", "06", "07", "13"]
  },
  {
    sigle: "F2",
    msId: "frankfurt-ub-fragm-lat-1-34",
    kind: "additional"
  },
  {
    sigle: "Fr",
    msId: "freiburg-ub-7",
    kind: "additional"
  },
  {
    sigle: "Fu",
    msId: "fulda-hl-cod-fragm-4",
    kind: "additional"
  },
  {
    sigle: "Ha",
    msId: "hannover-nh-44",
    kind: "additional"
  },
  {
    sigle: "Iv",
    msId: "ivrea-asd-XCIV",
    kind: "additional"
  },
  {
    sigle: "K",
    msId: "koeln-edd-c-119",
    kind: "core",
    manifestId: "../data/manifests/koeln-edd-c-119-manifest.json",
    uiGroup: "Köln", 
    citationLabel: "Köln, Erzbischöfliche Diözesan- und Dombibliothek, Cod. 119",
    // books actually available
    books: ["06", "07", "13"]
  },
  {
    sigle: "Kp",
    msId: "kopenhagen-kb-gks-1617-4",
    kind: "additional"
  },
  {
    sigle: "La",
    msId: "lambach-sa-c-m-XVI",
    kind: "additional"
  },
  {
    sigle: "Li",
    msId: "lissabon-bn-CCCIII-365",
    kind: "additional"
  },
  {
    sigle: "Lo",
    msId: "london-bl-cccIV-1-165",
    kind: "additional"
  },
  {
    sigle: "Lo2",
    msId: "london-bl-add-18371",
    kind: "additional"
  },
  {
    sigle: "LosA",
    msId: "losangeles-uc-1-XI-ITA-15",
    kind: "additional"
  },
  {
    sigle: "Lu",
    msId: "lucca-bcf-124",
    kind: "additional"
  },
  {
    sigle: "Lu2",
    msId: "lucca-bcf-597",
    kind: "additional"
  },
  {
    sigle: "Ma1",
    msId: "mailand-asc-601",
    kind: "additional"
  }, 
  {
    sigle: "Ma2",
    msId: "mailand-ba-e-144",
    kind: "additional"
  },
  {
    sigle: "Mb",
    msId: "marburg-hs-8-14",
    kind: "additional"
  },
  {
    sigle: "Md1",
    msId: "madrid-bne-386",
    kind: "additional"
  },
  {
    sigle: "Md2",
    msId: "madrid-bne-391",
    kind: "additional"
  },
  {
    sigle: "Md3",
    msId: "madrid-bn-6367",
    kind: "additional"
  },
  {
    sigle: "Mh1",
    msId: "manchester-ul-ms-lat-43",
    kind: "additional"
  },
  {
    sigle: "Mh2",
    msId: "manchester-ul-ms-lat-96",
    kind: "additional"
  },
  {
    sigle: "Mn",
    msId: "mantua-bct-ms-461",
    kind: "additional"
  },
  {
    sigle: "Mo",
    msId: "modena-bc-o-II-15",
    kind: "additional"
  },
  {
    sigle: "Mp",
    msId: "montpellier-bm-7",
    kind: "additional"
  }, 
  {
    sigle: "Mt1",
    msId: "montecassino-aa-44",
    kind: "additional"
  }, 
  {
    sigle: "Mt2",
    msId: "montecassino-aa-45",
    kind: "additional"
  }, 
  {
    sigle: "Mu1",
    msId: "muenchen-bsb-clm-4570",
    kind: "additional"
  }, 
  {
    sigle: "Mu2",
    msId: "muenchen-bsb-clm-5801c",
    kind: "additional"
  }, 
  {
    sigle: "Mu3",
    msId: "muenchen-bsb-clm-18094",
    kind: "additional"
  }, 
  {
    sigle: "Mu4",
    msId: "muenchen-ub-2-292",
    kind: "additional"
  }, 
  {
    sigle: "Mz1",
    msId: "monza-bc-d-10-152",
    kind: "additional"
  }, 
  {
    sigle: "Mz2",
    msId: "monza-bc-h-5-154",
    kind: "additional"
  }, 
  {
    sigle: "Mz3",
    msId: "monza-bc-c-1-61",
    kind: "additional"
  }, 
  {
    sigle: "Ne",
    msId: "neapel-bn-vind-lat-23",
    kind: "additional"
  }, 
  {
    sigle: "Ni",
    msId: "nimwegen-ub-ms-185",
    kind: "additional"
  }, 
  {
    sigle: "No1",
    msId: "novara-bc-16",
    kind: "additional"
  }, 
  {
    sigle: "No2",
    msId: "novara-bc-17",
    kind: "additional"
  },
  {
    sigle: "Or",
    msId: "orleans-mm-229",
    kind: "additional"
  },  
  {
    sigle: "Ox",
    msId: "oxford-sjc-125",
    kind: "additional"
  },
  {
    sigle: "Pd",
    msId: "padua-bsv-529",
    kind: "additional"
  },
  {
    sigle: "P1",
    msId: "paris-ba-678",
    kind: "additional"
  },
  {
    sigle: "P2",
    msId: "paris-bnf-lat-3860",
    kind: "additional"
  },
  {
    sigle: "P3",
    msId: "paris-bnf-lat-3861",
    kind: "additional"
  },
  {
    sigle: "P4",
    msId: "paris-bnf-lat-3862",
    kind: "additional"
  },
  {
    sigle: "P5",
    msId: "paris-bnf-lat-3863",
    kind: "additional"
  },
  {
    sigle: "P6",
    msId: "paris-bnf-lat-9630",
    kind: "additional"
  },
  {
    sigle: "P7",
    msId: "paris-bnf-lat-11578",
    kind: "additional"
  },
  {
    sigle: "P8",
    msId: "paris-bnf-lat-12449",
    kind: "additional"
  },
  {
    sigle: "P9",
    msId: "paris-bnf-lat-3454",
    kind: "additional"
  },
  {
    sigle: "P10",
    msId: "paris-bnf-lat-8922",
    kind: "additional"
  },
  {
    sigle: "P11",
    msId: "paris-bn-lat-4283",
    kind: "additional"
  },
  {
    sigle: "Pa",
    msId: "parma-bp-p-3777",
    kind: "additional"
  },
  {
    sigle: "Pv",
    msId: "pavia-as-3",
    kind: "additional"
  },
  {
    sigle: "Pi1",
    msId: "pistoia-ac-c-125",
    kind: "additional"
  },
  {
    sigle: "Pi2",
    msId: "pistoia-ac-c-140",
    kind: "additional"
  },
  {
    sigle: "Po",
    msId: "pommersfelden-gss-198",
    kind: "additional"
  },
  {
    sigle: "Pr",
    msId: "prato-br-q-VIII-4-3",
    kind: "additional"
  },
  {
    sigle: "Re1",
    msId: "reims-bm-673",
    kind: "additional"
  },
  {
    sigle: "Re2",
    msId: "reims-bm-674",
    kind: "additional"
  },
  {
    sigle: "Re3",
    msId: "reims-bm-673-fr",
    kind: "additional"
  },
  {
    sigle: "Ro",
    msId: "rom-bv-a-20",
    kind: "additional"
  },
  {
    sigle: "So",
    msId: "saintomer-ba-194",
    kind: "additional"
  },
  {
    sigle: "Sm",
    msId: "sanminiato-bc",
    kind: "additional"
  },
  {
    sigle: "Sg",
    msId: "sanktgallen-sb-674",
    kind: "additional"
  },
  {
    sigle: "Sg2",
    msId: "sanktgallen-sb-1398a",
    kind: "additional"
  },
  {
    sigle: "Si",
    msId: "siena-as-a-191-82",
    kind: "additional"
  },
  {
    sigle: "Ta",
    msId: "tarragona-bp-35-18",
    kind: "additional"
  },
  {
    sigle: "Tr",
    msId: "troyes-mjc-1386",
    kind: "additional"
  },
  {
    sigle: "Va1",
    msId: "vatikan-bav-barb-lat-1450",
    kind: "additional"
  },
  {
    sigle: "Va2",
    msId: "vatican-bav-pal-lat-585",
    kind: "core",
    manifestId: "../data/manifests/vatican-bav-pal-lat-585-manifest.json",
    uiGroup: "Vatikan 585",
    citationLabel: "Vatikan, Biblioteca Apostolica Vaticana, Pal. lat. 585",
    // books actually available
    books: ["01", "06", "07"]
  },
  {
    sigle: "Va3",
    msId: "vatican-bav-pal-lat-586",
    kind: "core",
    manifestId: "../data/manifests/vatican-bav-pal-lat-586-manifest.json",
    uiGroup: "Vatikan 586",
    citationLabel: "Vatikan, Biblioteca Apostolica Vaticana, Pal. lat. 586",
    // books actually available
    books: ["13"]
  },
  {
    sigle: "Va4",
    msId: "vatikan-bav-reg-lat-979",
    kind: "additional"
  },
  {
    sigle: "Va5",
    msId: "vatikan-bav-urb-lat-180",
    kind: "additional"
  },
  {
    sigle: "Va6",
    msId: "vatikan-bav-vat-lat-1355",
    kind: "additional"
  },
  {
    sigle: "Va7",
    msId: "vatikan-bav-vat-lat-3809",
    kind: "additional"
  },
  {
    sigle: "Va8",
    msId: "vatikan-bav-vat-lat-4880",
    kind: "additional"
  },
  {
    sigle: "Va9",
    msId: "vatikan-bav-vat-lat-4981",
    kind: "additional"
  },
  {
    sigle: "Va10",
    msId: "vatikan-bav-vat-lat-7790",
    kind: "additional"
  },
  {
    sigle: "Va11",
    msId: "vatikan-bav-vat-lat-14731",
    kind: "additional"
  },
  {
    sigle: "Va12",
    msId: "vatikan-asp-b-41",
    kind: "additional"
  },
  {
    sigle: "Va13",
    msId: "vatikan-bav-lat-4980-fr",
    kind: "additional"
  },
  {
    sigle: "Va14",
    msId: "vatikan-bav-lat-1356",
    kind: "additional"
  },
  {
    sigle: "Va15",
    msId: "vatikan-bav-lat-4980",
    kind: "additional"
  },
  {
    sigle: "Vc1",
    msId: "vercelli-bc-XLI",
    kind: "additional"
  },
  {
    sigle: "Vc2",
    msId: "vercelli-bc-XCIV",
    kind: "additional"
  },
  {
    sigle: "Vi1",
    msId: "vic-ac-frag-XV",
    kind: "additional"
  },
  {
    sigle: "Vi2",
    msId: "vic-ac",
    kind: "additional"
  },
  {
    sigle: "Wo1",
    msId: "wolfenbuettel-hab-novi-404-5-8",
    kind: "additional"
  },
  {
    sigle: "Wo2",
    msId: "wolfenbuettel-ns-m12-slg5",
    kind: "additional"
  },
  {
    sigle: "Wz1",
    msId: "wuerzburg-ub-m-86",
    kind: "additional"
  },
  {
    sigle: "Wz2",
    msId: "wuerzburg-ub-m-167",
    kind: "additional"
  },
  {
    sigle: "Wz3",
    msId: "wuerzburg-ub-m-15",
    kind: "additional"
  },
];



// BDD PATH RESOLVER (canonical only)

(function () {
  const BASE = new URL("../data/mss/", window.location.href).href;

  function msdescFilename(ms) {
    return `${ms.msId}-msdesc.xml`;
  }

  function normalizeBookN(bookN) {
    const n = String(bookN).trim();
    const digits = n.replace(/^0+/, "") || "0";
    return digits.padStart(2, "0");
  }

  function teiV1Base(ms) {
    // canonical folder: msId
    return `${BASE}${ms.msId}/Tei/v1`;
  }

  // ---------- Lookup helpers ----------
  window.getMsBySigle = function (sigle) {
    const list = window.BDD_MSS || [];
    return list.find(m => m.sigle === sigle) || null;
  };

  window.getMsById = function (msId) {
    const list = window.BDD_MSS || [];
    return list.find(m => m.msId === msId) || null;
  };

  // ---------- Public path API ----------
  window.BDD_PATHS = {
    teiV1(ms) {
      return teiV1Base(ms);
    },

    msdesc(ms) {
      return `${teiV1Base(ms)}/${msdescFilename(ms)}`;
    },

    bookHtml(ms, bookN) {
      const b = normalizeBookN(bookN);
      return `${teiV1Base(ms)}/${ms.msId}-${b}.html`;
    },

    bookXml(ms, bookN) {
      const b = normalizeBookN(bookN);
      return `${teiV1Base(ms)}/${ms.msId}-${b}.xml`;
    },

    bookEditorHtml(ms, bookN) {
      const b = normalizeBookN(bookN);
      return `${teiV1Base(ms)}/${ms.msId}-${b}editor.html`;
    },

    bookScribeHtml(ms, bookN) {
      const b = normalizeBookN(bookN);
      return `${teiV1Base(ms)}/${ms.msId}-${b}scribe.html`;
    },

    bookStructureHtml(ms, bookN) {
      const b = normalizeBookN(bookN);
      return `${teiV1Base(ms)}/${ms.msId}-${b}structure.html`;
    }
  };

  // ---------- Backwards compatible msPath(ms) ----------
  window.msPath = function (ms) {
    return window.BDD_PATHS.msdesc(ms);
  };
})();
