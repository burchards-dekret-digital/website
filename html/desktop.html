<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <title>Desktop</title>
      <meta name="keywords" content="Burchards Dekret Digital Desktop, Manuscript Transcriptions, Manuscripts Comparison, Mirador Viewer">
      <meta name="description" content="Use the Burchards Dekret Digital Desktop to add, view, and compare transcriptions and digitized images of manuscripts. Customize views and download your workspace in JSON format.">

      <link rel="icon" type="image/png" href="../img/favicon.png" sizes="32x32">
      <meta charset="UTF-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <meta name="google" content="notranslate"/>
      
      <link href="../CSS/bootstrap.min.css" rel="stylesheet">
      <script src="../js/bootstrap.bundle.min.js"></script>

      <script src="../js/mirador-3.3.0.min.js"></script>
      
      <link rel="stylesheet" type="text/css" href="../CSS/style.css" media="screen"/>
      <link rel="stylesheet" type="text/css" href="../CSS/digitaleSynopse.css" media="screen"/>
      
      <link rel="stylesheet" href="../CSS/all.min.css"><!--Fontawesome-->
      
      <script src="../js/jquery-3.7.1.min.js"></script>
      <script src="../js/language.js" defer></script>
      <script src="../js/digitaleSynopse.js" defer></script>
      <script src="../js/navigation.js" defer></script>

      <style>
          .row {
              overflow-x: auto;
          }

          #resourcePanel {
              display: flex;
          }

          .resource-panel-item {
              flex: 0 0 auto; /* Prevent panels from growing */
              margin-right: 10px; /* Adjust margin between panels */
          }

          .resource-panel-item.only-child {
              flex: 1; /* Expand the single panel to fill the space */
          }

          .resource-panel-item.full-width {
              width: 100%;
          }

          .resource-panel-item.three-quarter-width {
              width: 75%;
          }

          .resource-panel-item.half-width {
              width: 50%;
          }

          .btn-outline-primary {
          background-color: transparent;
          color: #0d6efd;
          border-color: #0d6efd;
          }

          .move-left, .move-right {
              transition: all 0.3s; /* Add transition for smooth effect */
          }
          .move-left:hover, .move-right:hover {
              transform: scale(1.1); /* Make the icon slightly bigger on hover */
              color: blue; /* Change the color to blue on hover */
              cursor: pointer; /* Change cursor to pointer on hover */
              filter: drop-shadow(-2px 0 3px rgba(0, 0, 0, 0.2));
          }

      </style>
  </head>
  <body>
      <div id="navbar-placeholder"></div>
      <div class="back-button ps-4 mt-5">
        <button class="btn btn-outline-secondary rounded-circle hBack" type="button"><i class="fas fa-arrow-left"></i></button>
      </div>

      <div id="load">
        <i class="fa-solid fa-spinner"></i>
      </div>

      <div id="contents" class="container" style="flex:1">
          <h1 class="section-main-title">
            <span lang="de">ARBEITSBEREICH</span><span lang="en">WORKSPACE</span> 
          </h1>

        <!-- Modal -->
        <div class="modal fade" id="desktopModal" tabindex="-1" aria-labelledby="desktopModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h3 class="modal-title fs-5 fw-bold" id="desktopModalLabel"><span lang="de">ARBEITSBEREICH</span><span lang="en">WORKSPACE</span></h3>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body" id="infoSchreibtisch"></div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><span lang="de">Schließen</span><span lang="en">Close</span></button>
                
              </div>
            </div>
          </div>
        </div>

        <div class="alert alert-warning alert-dismissible fade show d-md-none" role="alert">
          <span lang="de"><strong>Hinweis:</strong> Sie sehen diese Website auf einem kleinen Gerät. Einige Funktionen sind daher eingeschränkt. Wir empfehlen Ihnen, einen Computer zu verwenden, um die Website optimal zu nutzen und alle Funktionen auszuschöpfen.</span><span lang="en"><strong>Notice:</strong> You are viewing this website on a small device. Some features are limited. We recommend using a computer for a better experience and to take advantage of all features.</span>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="d-flex gap-2">
          <button type="button" class="btn btn-success" style="background-color: #28a745!important; border-color: #28a745!important" data-bs-toggle="modal" data-bs-target="#desktopModal">Info</button>

          <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
              <span lang="de">Arbeitsmaterial</span>
              <span lang="en">Work material</span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li><a class="dropdown-item" id="addResourceBtn" href="#"><span lang="de">Ressource hinzufügen</span><span lang="en">Add Resource</span></a></li>
              <li><hr class="dropdown-divider"></li>
              <li style="display: flex;">
                <a class="dropdown-item" id="downloadJsonBtn" href="#"><span lang="de">JSON herunterladen</span><span lang="en">Download JSON</span></a> 
                <span data-bs-toggle="tooltip" data-bs-placement="top" data-bs-custom-class="custom-tooltip" data-bs-title="Info">
                  <button type="button" class="btn"" data-bs-toggle="modal" data-bs-target="#desktopModal">
                    <i class="fa-solid fa-circle-info fa-xl" style="color: #46b65f;"></i>
                  </button>
                </span>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" id="listResources" href="#"><span lang="de">Was auf meinem Arbeitsbereich liegt</span><span lang="en">What's on my workspace</span></a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" id="clearAll" href="#"><span lang="de">Alle löschen</span><span lang="en">Clear all</span></a></li>
            </ul>
          </div>
        
          <div id="transcription-view-button" class="dropdown float-end" style="display: none;">
            <button lang="de" class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Transkriptionsansichten
            </button>
            <button lang="en" class="btn btn-dark dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Transcription views
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" onclick="showElement('tei_lb')"><span lang="de">Original</span><span lang="en">Original</span></a></li>
              <li><a class="dropdown-item" onclick="hideElement('tei_lb'); hideElement('tei_seg_displaced'); toggleTextWrap()"><span lang="de">Lesefassung</span><span lang="en">Reading version</span></a></li>
              <hr/>
              <li><a class="dropdown-item" onclick="showElement('tei_abbr');hideElement('tei_expan')"><span lang="de">Abkürzungen anzeigen</span><span lang="en">Show abbreviations</span></a></li>
              <li><a class="dropdown-item" onclick="showElement('tei_expan');hideElement('tei_abbr')"><span lang="de">Auflösungen anzeigen</span><span lang="en">Show resolutions</span></a></li>
              <hr/>
              <li><a class="dropdown-item" onclick="showScribes()"><span lang="de">Schreiber anzeigen</span><span lang="en">Show scribes</span></a></li>
              <li><a class="dropdown-item" onclick="hideScribes()"><span lang="de">Schreiber ausblenden</span><span lang="en">Hide scribes</span></a></li>
            </ul>
          </div>
        </div>
          

          <div id="welcomeMessage" class="m-5">
            <div class="alert alert-light" role="alert">
              <h3 class="text-center"><span lang="de">Willkommen in Ihrem Arbeitsbereich!</span><span lang="en">Welcome to your workspace!</span></h3>
            <span lang="de">
              <p>Hier können Sie einzelne Bücher des Dekrets auswählen und anzeigen lassen. Klicken Sie dazu auf die Schaltfläche <b>Arbeitsmaterial</b> und wählen Sie die Option <b>Ressource hinzufügen</b>. Dann wählen Sie aus der Liste der Handschriften die derzeit verfügbaren Bücher aus, die Sie konsultieren möchten. Sie können dann die Transkription  und den Text im digitalisierten Originalmanuskript parallel ansehen.</p>
              <p>Für weitere Informationen zu den Funktionen dieser Seite klicken Sie bitte auf die Schaltfläche <b>Info</b>.</p>
            </span>
              <span lang="en"><p>Here you can select and display individual books of the Decree. Click on the <b>Work material</b> button and choose the option <b>Add Resource</b>. Then select from the list of manuscripts the currently available books you would like to consult.
You can then view the transcription and the text in the digitized original manuscript side by side.</p>
              
              <p>For further information about the functions of this page, please click on the <b>Info</b> button.</p>
            </span>
            </div>
            
            
          </div>
          
          <div class="row mt-3 panelsWindow overflow-auto">
              <div class="col">
                  <div class="d-flex" id="resourcePanel"></div>
              </div>
          </div>


          <!-- Modal for selecting resources -->
          <div class="modal fade" id="resourceModal" tabindex="-1" aria-labelledby="resourceModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                      <h3 class="modal-title" id="resourceModalLabel"><span lang="de">Ressourcen auswählen</span><span lang="en">Select Resources</span></h3>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <!--<div class="modal-body enter-mss-id">
                        <h6><span lang="de">Handschrift ID eingeben</span><span lang="en">Enter Manuscript ID</span></h6>
                        <input type="text" class="form-control form-control-sm" id="mssIdInput" aria-label=".form-control-sm example"> 
                      </div>-->
                      <div class="modal-body json-upload">
                          <h6><span lang="de">JSON Hochladen</span><span lang="en">Load JSON</span></h6>
                          <input type="file" class="form-control" id="jsonFileInput" accept=".json">   
                      </div>
                      <div class="accordion" id="accordionManuscripts">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="BambergHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBamberg" aria-expanded="false" aria-controls="collapseBamberg">
                                Bamberg, Staatsbibliothek, Can. 6
                                </button>
                            </h2>
                            <div id="collapseBamberg" class="accordion-collapse collapse" aria-labelledby="BambergHeader" data-bs-parent="#accordionManuscripts">
                                <div class="accordion-body">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_00" id="BambergBook00">
                                        <label class="form-check-label" for="BambergBook00">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 00
                                        </label>
                                      </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_01" id="BambergBook01">
                                            <label class="form-check-label" for="BambergBook01">
                                              <span lang="de">Buch</span><span lang="en">Book</span> 01
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_02" id="BambergBook02">
                                            <label class="form-check-label" for="BambergBook02">
                                              <span lang="de">Buch</span><span lang="en">Book</span> 02
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_03" id="BambergBook03">
                                            <label class="form-check-label" for="BambergBook03">
                                              <span lang="de">Buch</span><span lang="en">Book</span> 03
                                            </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_04" id="BambergBook04">
                                          <label class="form-check-label" for="BambergBook04">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 04
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_05" id="BambergBook05">
                                          <label class="form-check-label" for="BambergBook05">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 05
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_06" id="BambergBook06">
                                          <label class="form-check-label" for="BambergBook06">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 06
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_07" id="BambergBook07">
                                          <label class="form-check-label" for="BambergBook07">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 07
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_08" id="BambergBook08">
                                          <label class="form-check-label" for="BambergBook08">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 08
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_09" id="BambergBook09">
                                          <label class="form-check-label" for="BambergBook09">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 09
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_10" id="BambergBook10">
                                          <label class="form-check-label" for="BambergBook10">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 10
                                          </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_11" id="BambergBook11">
                                        <label class="form-check-label" for="BambergBook11">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 11
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_12" id="BambergBook12">
                                        <label class="form-check-label" for="BambergBook12">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 12
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_13" id="BambergBook13">
                                        <label class="form-check-label" for="BambergBook13">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 13
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_14" id="BambergBook14">
                                        <label class="form-check-label" for="BambergBook14">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 14
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_15" id="BambergBook15">
                                        <label class="form-check-label" for="BambergBook15">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 15
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_16" id="BambergBook16">
                                        <label class="form-check-label" for="BambergBook16">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 16
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_17" id="BambergBook17">
                                        <label class="form-check-label" for="BambergBook17">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 17
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_18" id="BambergBook18">
                                        <label class="form-check-label" for="BambergBook18">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 18
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_19" id="BambergBook19">
                                        <label class="form-check-label" for="BambergBook19">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 19
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Bamberg_B_20" id="BambergBook20">
                                        <label class="form-check-label" for="BambergBook20">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 20
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                          <h2 class="accordion-header" id="FrankfurtHeader">
                              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFrankfurt" aria-expanded="false" aria-controls="collapseFrankfurt">
                              Frankfurt am Main, Universitätsbibliothek Johann Christian Senckenberg, Barth. 50
                              </button>
                          </h2>
                          <div id="collapseFrankfurt" class="accordion-collapse collapse" aria-labelledby="FrankfurtHeader" data-bs-parent="#accordionManuscripts">
                              <div class="accordion-body">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_00" id="FrankfurtBook00">
                                      <label class="form-check-label" for="FrankfurtBook0">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 00
                                      </label>
                                    </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_01" id="FrankfurtBook01">
                                          <label class="form-check-label" for="FrankfurtBook01">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 01
                                          </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_02" id="FrankfurtBook02">
                                          <label class="form-check-label" for="FrankfurtBook02">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 02
                                          </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_03" id="FrankfurtBook03">
                                          <label class="form-check-label" for="FrankfurtBook03">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 03
                                          </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_04" id="FrankfurtBook04">
                                        <label class="form-check-label" for="FrankfurtBook04">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 04
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_05" id="FrankfurtBook05">
                                        <label class="form-check-label" for="FrankfurtBook05">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 05
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_06" id="FrankfurtBook06">
                                        <label class="form-check-label" for="FrankfurtBook06">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 06
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_07" id="FrankfurtBook07">
                                        <label class="form-check-label" for="FrankfurtBook07">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 07
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_08" id="FrankfurtBook08">
                                        <label class="form-check-label" for="FrankfurtBook08">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 08
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_09" id="FrankfurtBook09">
                                        <label class="form-check-label" for="FrankfurtBook09">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 09
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_10" id="FrankfurtBook10">
                                        <label class="form-check-label" for="FrankfurtBook10">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 10
                                        </label>
                                      </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_11" id="FrankfurtBook11">
                                      <label class="form-check-label" for="FrankfurtBook11">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 11
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_12" id="FrankfurtBook12">
                                      <label class="form-check-label" for="FrankfurtBook12">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 12
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_13" id="FrankfurtBook13">
                                      <label class="form-check-label" for="FrankfurtBook13">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 13
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_14" id="FrankfurtBook14">
                                      <label class="form-check-label" for="FrankfurtBook14">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 14
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_15" id="FrankfurtBook15">
                                      <label class="form-check-label" for="FrankfurtBook15">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 15
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_16" id="FrankfurtBook16">
                                      <label class="form-check-label" for="FrankfurtBook16">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 16
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_17" id="FrankfurtBook17">
                                      <label class="form-check-label" for="FrankfurtBook17">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 17
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_18" id="FrankfurtBook18">
                                      <label class="form-check-label" for="FrankfurtBook18">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 18
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_19" id="FrankfurtBook19">
                                      <label class="form-check-label" for="FrankfurtBook19">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 19
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Frankfurt_F_20" id="FrankfurtBook20">
                                      <label class="form-check-label" for="FrankfurtBook20">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 20
                                      </label>
                                    </div>
                                  </div>
                                </div> 
                              </div>
                          </div>
                        </div>
                        <div class="accordion-item">
                          <h2 class="accordion-header" id="KölnHeader">
                              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseKöln" aria-expanded="false" aria-controls="collapseKöln">
                                Köln, Erzbischöfliche Diözesan- und Dombibliothek, Cod. 119
                              </button>
                          </h2>
                          <div id="collapseKöln" class="accordion-collapse collapse" aria-labelledby="KölnHeader" data-bs-parent="#accordionManuscripts">
                              <div class="accordion-body">
                                <div class="row">
                                  <div class="col-md-6">
                                    <!--<div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_00" id="KölnBook00">
                                      <label class="form-check-label" for="KölnBook00">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 00
                                      </label>
                                    </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_01" id="KölnBook01">
                                          <label class="form-check-label" for="KölnBook01">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 01
                                          </label>
                                      </div>-->
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_02" id="KölnBook02">
                                          <label class="form-check-label" for="KölnBook02">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 02
                                          </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_03" id="KölnBook03">
                                          <label class="form-check-label" for="KölnBook03">
                                            <span lang="de">Buch</span><span lang="en">Book</span> 03
                                          </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_04" id="KölnBook04">
                                        <label class="form-check-label" for="KölnBook04">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 04
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_05" id="KölnBook05">
                                        <label class="form-check-label" for="KölnBook05">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 05
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_06" id="KölnBook06">
                                        <label class="form-check-label" for="KölnBook06">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 06
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_07" id="KölnBook07">
                                        <label class="form-check-label" for="KölnBook07">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 07
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_08" id="KölnBook08">
                                        <label class="form-check-label" for="KölnBook08">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 08
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_09" id="KölnBook09">
                                        <label class="form-check-label" for="KölnBook09">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 09
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_10" id="KölnBook10">
                                        <label class="form-check-label" for="KölnBook10">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 10
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_11" id="KölnBook11">
                                        <label class="form-check-label" for="KölnBook11">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 11
                                        </label>
                                      </div>
                                  </div>
                                  <div class="col-md-6">
                                    
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_12" id="KölnBook12">
                                      <label class="form-check-label" for="KölnBook12">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 12
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_13" id="KölnBook13">
                                      <label class="form-check-label" for="KölnBook13">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 13
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_14" id="KölnBook14">
                                      <label class="form-check-label" for="KölnBook14">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 14
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_15" id="KölnBook15">
                                      <label class="form-check-label" for="KölnBook15">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 15
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_16" id="KölnBook16">
                                      <label class="form-check-label" for="KölnBook16">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 16
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_17" id="KölnBook17">
                                      <label class="form-check-label" for="KölnBook17">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 17
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_18" id="KölnBook18">
                                      <label class="form-check-label" for="KölnBook18">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 18
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_19" id="KölnBook19">
                                      <label class="form-check-label" for="KölnBook19">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 19
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Köln_K_20" id="KölnBook20">
                                      <label class="form-check-label" for="KölnBook20">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 20
                                      </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                          </div>
                        </div>
                        <div class="accordion-item">
                          <h2 class="accordion-header" id="Vatikan585Header">
                              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVatikan585" aria-expanded="false" aria-controls="collapseVatikan585">
                                Vatikan (Va2), Biblioteca Apostolica Vaticana, Pal. Lat. 585
                              </button>
                          </h2>
                          <div id="collapseVatikan585" class="accordion-collapse collapse" aria-labelledby="Vatikan585Header" data-bs-parent="#accordionManuscripts">
                              <div class="accordion-body">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_00" id="Vatikan585Book00">
                                      <label class="form-check-label" for="Vatikan585Book00">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 00
                                      </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_01" id="Vatikan585Book01">
                                        <label class="form-check-label" for="Vatikan585Book01">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 01
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_02" id="Vatikan585Book02">
                                        <label class="form-check-label" for="Vatikan585Book02">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 02
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_03" id="Vatikan585Book03">
                                        <label class="form-check-label" for="Vatikan585Book03">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 03
                                        </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_04" id="Vatikan585Book04">
                                      <label class="form-check-label" for="Vatikan585Book04">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 04
                                      </label>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_05" id="Vatikan585Book05">
                                      <label class="form-check-label" for="Vatikan585Book05">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 05
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_06" id="Vatikan585Book06">
                                      <label class="form-check-label" for="Vatikan585Book06">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 06
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_07" id="Vatikan585Book07">
                                      <label class="form-check-label" for="Vatikan585Book07">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 07
                                      </label>
                                    </div>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" value="Vatikan 585_Va2_08" id="Vatikan585Book08">
                                      <label class="form-check-label" for="Vatikan585Book08">
                                        <span lang="de">Buch</span><span lang="en">Book</span> 08
                                      </label>
                                    </div>
                                  </div>
                                </div>
                              </div>
                          </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="Vatikan586Header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVatikan586" aria-expanded="false" aria-controls="collapseVatikan586">
                                  Vatikan (Va3), Biblioteca Apostolica Vaticana, Pal. Lat. 586
                                </button>
                            </h2>
                            <div id="collapseVatikan586" class="accordion-collapse collapse" aria-labelledby="Vatikan586Header" data-bs-parent="#accordionManuscripts">
                                <div class="accordion-body">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_09" id="Vatikan586Book09">
                                        <label class="form-check-label" for="Vatikan586Book09">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 09
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_10" id="Vatikan586Book10">
                                        <label class="form-check-label" for="Vatikan586Book10">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 10
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_11" id="Vatikan586Book11">
                                        <label class="form-check-label" for="Vatikan586Book11">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 11
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_12" id="Vatikan586Book12">
                                        <label class="form-check-label" for="Vatikan586Book12">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 12
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_13" id="Vatikan586Book13">
                                        <label class="form-check-label" for="Vatikan586Book13">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 13
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_14" id="Vatikan586Book14">
                                        <label class="form-check-label" for="Vatikan586Book14">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 14
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_15" id="Vatikan586Book15">
                                        <label class="form-check-label" for="Vatikan586Book15">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 15
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_16" id="Vatikan586Book16">
                                        <label class="form-check-label" for="Vatikan586Book16">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 16
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_17" id="Vatikan586Book17">
                                        <label class="form-check-label" for="Vatikan586Book17">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 17
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_18" id="Vatikan586Book18">
                                        <label class="form-check-label" for="Vatikan586Book18">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 18
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_19" id="Vatikan586Book19">
                                        <label class="form-check-label" for="Vatikan586Book19">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 19
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikan 586_Va3_20" id="Vatikan586Book20">
                                        <label class="form-check-label" for="Vatikan586Book20">
                                          <span lang="de">Buch</span><span lang="en">Book</span> 20
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                        </div>
                        
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><span lang="de">Schließen</span><span lang="en">Close</span></button>
                      <button type="button" class="btn btn-primary" id="confirmSelectionBtn"><span lang="de">Auswahl bestätigen</span><span lang="en">Confirm Selection</span></button>
                    </div>
                </div>
              </div>
          </div>


          <!-- Modal with list of resources on my desk-->
          <div class="modal fade" id="resourcesList" tabindex="-1" aria-labelledby="resourcesListLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                    <h3 class="modal-title" id="resourcesListLabel"><span lang="de">Was auf meinem Arbeitsbereich liegt</span><span lang="en">What's on my workspace</span></h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="modal-body ">
                        <ul id="resourcesUnorderedList">
                          
                        </ul>
                    </div>
                    
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><span lang="de">Schließen</span><span lang="en">Close</span></button>
                  </div>
              </div>
            </div>
        </div>

      

      <!--MODAL FOR EXPLAINING THE MEANING OF COLORS AND SYMBOLS IN THE TRANSCRIPTIONS-->
      <div class="modal fade" id="legendModal" tabindex="-1" aria-labelledby="legendModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h3 class="modal-title fs-5 fw-bold" id="legendModalLabel"><span lang="de">Legende zur Transkription</span><span lang="en">Transcription legend</span></h3>
            </div>
            <div class="modal-body" id="infoStyleTranscriptions">
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><span lang="de">Schließen</span><span lang="en">Close</span></button>
            </div>
          </div>
        </div>
      </div>
      </div>
      <div id="footer-placeholder"></div>
      
  </body>
  
  <script>
    //Tooltip
    document.addEventListener('DOMContentLoaded', function () {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
      tooltipTriggerList.forEach(el => new bootstrap.Tooltip(el));
    });
  </script>
  <script>
  // Initial page load handling
  document.onreadystatechange = function () {
    if (document.readyState === 'interactive') {
      document.getElementById('contents').style.visibility = "hidden";
    } else if (document.readyState === 'complete') {
      setTimeout(function () {
        document.getElementById('load').style.display = "none";
        document.getElementById('contents').style.visibility = "visible";
      }, 1000); // Optional delay
    }
  };

  document.getElementById('confirmSelectionBtn').addEventListener('click', function () {
    // Show loader
    document.getElementById('load').style.display = "flex";
    document.getElementById('contents').style.visibility = "hidden";

    setTimeout(function () {
      // Hide loader again
      document.getElementById('load').style.display = "none";
      document.getElementById('contents').style.visibility = "visible";
    }, 2000); // Simulated delay
  });

</script>


  <script>
    // Function to find all corresponding divs based on data-corresp
  function findAllCorrespondingDivsFromDataCorresp(div) {
    let correspondingDivs = [];
    
    // Read data-corresp attribute
    let corresp = div.getAttribute('data-corresp');
    
    if (corresp) {
        let ids = corresp.split(/\s+/); // Split by space

        ids.forEach(id => {
            let correspondingDiv = document.getElementById(id);
            if (correspondingDiv) {
                correspondingDivs.push(correspondingDiv);
            }
        });
    }

    return correspondingDivs;
  }

  // Main function to sync chapters across all manuscripts
  function syncChapters(button) {
    let chapterDiv = button.closest('.tei_chapter');

    if (!chapterDiv) {
        console.log('Chapter div not found');
        return;
    }

    let correspondingDivs = findAllCorrespondingDivsFromDataCorresp(chapterDiv);

    correspondingDivs.forEach(div => {
        const scrollContainer = div.closest('.transcription-col');
        if (scrollContainer) {
            scrollContainer.scrollTo({
                top: div.offsetTop - 55,
                behavior: "smooth"
            });
        }
    });
  }


  function navigateChapter(button, direction) {
    const chapterDiv = button.closest('.tei_chapter'); // Find the closest chapter div
    const column = chapterDiv.closest('.transcription-col'); // Find the closest transcription column
    const chapters = column.querySelectorAll('.tei_chapter'); // Select all chapters in the column
    const currentIndex = Array.from(chapters).indexOf(chapterDiv); // Get the current chapter index

    if (direction === 'prev' && currentIndex > 0) { // Scroll to previous chapter
        const prevChapter = chapters[currentIndex - 1];
        column.scrollTo({
            top: prevChapter.offsetTop - 55,
            behavior: 'smooth'
        });
    } else if (direction === 'next' && currentIndex < chapters.length - 1) { // Scroll to next chapter
        const nextChapter = chapters[currentIndex + 1];
        column.scrollTo({
            top: nextChapter.offsetTop - 55,
            behavior: 'smooth'
        });
    }
  }

//--------------------------------------------------------------------------

// Function to extract the interrogation number from the ID
  function getInterrogationNumber(id) {
      let regex = /int-(\d+)/;
      let match = id.match(regex);
      return match ? match[1] : null;
  }

  // Function to find all corresponding divs from all manuscripts for the same interrogation
  function findAllCorrespondingDivs(interrogationNumber) {
      // Get all divs with a interrogation in their ID
      let allInterrogations = document.querySelectorAll('[id*="int-"]');
      let correspondingDivs = [];

      allInterrogations.forEach(function (interrogationDiv) {
          // Check if the interrogation number matches
          if (getInterrogationNumber(interrogationDiv.id) === interrogationNumber) {
              correspondingDivs.push(interrogationDiv);
          }
      });
      return correspondingDivs;
  }

  // Function to sync interrogations across all manuscripts
  function syncInterrogations(button) {
      let manuscriptDiv = button.closest('div');
      let manuscriptId = manuscriptDiv.id;
      let interrogationNumber = getInterrogationNumber(manuscriptId);

      if (interrogationNumber) {
          let correspondingDivs = findAllCorrespondingDivs(interrogationNumber);
          correspondingDivs.forEach(div => {
            const scrollContainer = div.closest('.transcription-col');
            
            if (scrollContainer) {
              scrollContainer.scrollTo({
                top: div.offsetTop - 55,
                behavior: "smooth"
              });
            }
          });
      } else {
          console.log('Interrogation number not found');
      }
  }

  function navigateInterrogation(button, direction) {
      const interrogationDiv = button.closest('.tei_interrogation'); // Find the closest interrogation div
      const column = interrogationDiv.closest('.transcription-col'); // Find the closest transcription column
      const interrogations = column.querySelectorAll('.tei_interrogation'); // Select all interrogation in the column
      const currentIndex = Array.from(interrogations).indexOf(interrogationDiv); // Get the current interrogation index

      if (direction === 'prev' && currentIndex > 0) { // Scroll to previous interrogation
          const prevInterrogation = interrogations[currentIndex - 1];
          column.scrollTo({
              top: prevInterrogation.offsetTop - 55,
              behavior: 'smooth'
          });
      } else if (direction === 'next' && currentIndex < interrogations.length - 1) { // Scroll to next interrogation
          const nextInterrogation = interrogations[currentIndex + 1];
          column.scrollTo({
              top: nextInterrogation.offsetTop - 55,
              behavior: 'smooth'
          });
      }
  }

  //open the modal to select books  
  const activeOptions = ["13", "01", "06", "07"]
  document.querySelectorAll('#resourceModal input[type="checkbox"]').forEach(function(checkbox) {
    if (!activeOptions.some(element => checkbox.value.includes(element))){ //todo remove "!" when active options will be longer than non active options
      checkbox.disabled = true;
    }
  })
  document.getElementById('addResourceBtn').addEventListener('click', function() {
    $('#resourceModal').modal('show');

    // Deselect all checkboxes
    let checkboxes = document.querySelectorAll('#resourceModal input[type="checkbox"]');
    checkboxes.forEach(function(checkbox) {
        checkbox.checked = false;
    });
  });

  document.getElementById('jsonFileInput').addEventListener('change', function() {
    const file = this.files[0];
    const reader = new FileReader();
    reader.onload = function(event) {
      const jsonData = JSON.parse(event.target.result);
      displayResourcesFromJson(jsonData);
      saveResourceState(); // Save resource panel status after uploading data from Json
    };
    reader.readAsText(file);
  });

  document.getElementById('confirmSelectionBtn').addEventListener('click', function(e) {
    e.preventDefault()
    $('#resourceModal').modal('hide');
    displaySelectedResources();
    adjustPanelWidth()
  });

  // What's on my desk - list of resources
  document.getElementById('listResources').addEventListener('click', function() {
    $('#resourcesList').modal('show');
  });

  function removeListItem(id) { // added
    $("#resourcesUnorderedList li[for='" + id + "']").remove();
    $("[data-ms='" + id + "']").remove();
    adjustPanelWidth();
    saveResourceState();
  }

  // After function displaySelectedResources() --> save resource panel status in local storage
  function saveResourceState() {
    let resourcePanels = document.querySelectorAll('.resource-panel-item');
    let resourceState = [];
    resourcePanels.forEach(panel => {
      let bookId = panel.getAttribute("data-ms");
      let view = {
        transcription: panel.querySelector('.add-transcription-btn').classList.contains('btn-primary'),
        structure: panel.querySelector('.add-structure-btn').classList.contains('btn-primary'),
        mirador: panel.querySelector('.mirador-btn').classList.contains('btn-primary'),
        scribe: panel.querySelector('.scribe-btn').classList.contains('btn-primary'),
        editor: panel.querySelector('.editor-btn').classList.contains('btn-primary')
        
      };
      resourceState.push({ bookId, view });
    });

    localStorage.setItem('resourceState', JSON.stringify(resourceState));
    adjustPanelWidth()
    updateWelcomeMessageVisibility();
    toggleTranscriptionButtonVisibility();
  }

  // Upload source panel status from local storage
  async function loadResourceState() {
    const resourceState = JSON.parse(localStorage.getItem('resourceState'));
    if (resourceState) {
      displayResourcesFromJson(resourceState)
    }
    adjustPanelWidth()
    updateWelcomeMessageVisibility();
    toggleTranscriptionButtonVisibility()
  }

  /*Citation code*/
  // On page load, check for citation hash
  window.addEventListener('load', async function() {
    let hash = window.location.hash.replace('#', '').trim();

    if (hash) {
      // Load citation mode: only the book in the hash
      let container = document.getElementById('resourcePanel');
      container.innerHTML = '';
      let selectedViews = [true, false, true, false, false]; // show transcription + mirador + editor
      await initializeMirador(container, hash, selectedViews);

      // Hide welcome message and show transcription toggle if needed
      updateWelcomeMessageVisibility();
      toggleTranscriptionButtonVisibility();
    } else {
      // Default: restore previous workspace from localStorage
      loadResourceState();
    }
  });


  // Call function loadResourceState() when loading the page
  //window.addEventListener('load', loadResourceState);

  async function displayResourcesFromJson(jsonData) {
    let container = document.getElementById('resourcePanel');
    container.innerHTML = '';
    for (let resource of jsonData) {
      let selectedViews = [false, false, false, false, false]
      if (resource.view.transcription) {
        selectedViews[0] = true
      }
      if (resource.view.structure) {
        selectedViews[1] = true
      }
      if (resource.view.mirador) {
        selectedViews[2] = true
      }
      
      if (resource.view.scribe) { 
        selectedViews[3] = true 
      }
      if (resource.view.editor) {
        selectedViews[4] = true
      }
      await initializeMirador(container, resource.bookId, selectedViews)
    }
    updateWelcomeMessageVisibility();
    toggleTranscriptionButtonVisibility();
  }
      

  //display resources after selecting them in the modal
  function displaySelectedResources() {
    let resourcePanel = document.getElementById('resourcePanel');

    let BambergBooks = document.querySelectorAll('#collapseBamberg input[type="checkbox"]:checked');
    let FrankfurtBooks = document.querySelectorAll('#collapseFrankfurt input[type="checkbox"]:checked');
    let KölnBooks = document.querySelectorAll('#collapseKöln input[type="checkbox"]:checked');
    let Vatikan585Books = document.querySelectorAll('#collapseVatikan585 input[type="checkbox"]:checked');
    let Vatikan586Books = document.querySelectorAll('#collapseVatikan586 input[type="checkbox"]:checked');
    // Add new panel without removing the ones already present
    appendBooks(resourcePanel, BambergBooks);
    appendBooks(resourcePanel, FrankfurtBooks);
    appendBooks(resourcePanel, KölnBooks);
    appendBooks(resourcePanel, Vatikan585Books);
    appendBooks(resourcePanel, Vatikan586Books);

    adjustPanelWidth();
    updateWelcomeMessageVisibility();
    toggleTranscriptionButtonVisibility()
  }
  
  function toggleTranscriptionButtonVisibility() {
    const resourcePanel = document.getElementById('resourcePanel');
    const transcriptionButton = document.getElementById('transcription-view-button');

    if (resourcePanel && resourcePanel.children.length > 0) {
      transcriptionButton.style.display = 'block';
    } else {
      transcriptionButton.style.display = 'none';
    }
  }

  
/*new version*/
  async function initializeMirador(container, book, selectedViews) {
    return new Promise(async (resolve, reject) => {
      let [msName, msAbbr, bookN] = book.split('_');

      let folderPath = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN + '.html';
      let folderPathStructure = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN + 'structure.html';
      let folderPathScribe = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN + 'scribe.html';
      let folderPathEditor = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN + 'editor.html';
      

      let response = await fetch(folderPath);
      let htmlContent = await response.text();
      let responseStructure = await fetch(folderPathStructure);
      let responseScribe = await fetch(folderPathScribe);
      let responseEditor = await fetch(folderPathEditor);
      

      // check scribe as well
      if (response.ok && responseStructure.ok && responseScribe.ok && responseEditor.ok) {
        let msViews = [];
        msViews.push(htmlContent);                        // 0 transcription
        msViews.push(await responseStructure.text());     // 1 structure
        msViews.push("<div class='mirDesktop' id='" + "mirador" + msAbbr + bookN + "'></div>"); // 2 mirador
        msViews.push(await responseScribe.text());        // 3 scribe
        msViews.push(await responseEditor.text());        // 4 editor

        let mirID = "mirador" + msAbbr + bookN;
        let manifestId = '';
        let catalog = [
          { sigle: 'F', manifestId: '../data/manifests/frankfurt-ub-b-50-manifest.json' },
          { sigle: 'Va2', manifestId: '../data/manifests/vatican-bav-pl-585-manifest.json' },
          { sigle: 'Va3', manifestId: '../data/manifests/vatican-bav-pl-586-manifest.json' },
          { sigle: 'B', manifestId: '../data/manifests/bamberg-sb-c-6.json' },
          { sigle: 'K', manifestId: '../data/manifests/koeln-edd-119-manifest.json' }
        ];

        // select data-canvas from html transcription
        let doc = new DOMParser().parseFromString(htmlContent, 'text/html');
        let canvasId = doc.querySelector('[data-canvas]').getAttribute("data-canvas");

        // find correct manifest
        for (let i = 0; i < catalog.length; i++) {
          if (catalog[i].sigle === msAbbr) {
            manifestId = catalog[i].manifestId;
          }
        }

        let panel = createResourcePanel(book, `${msName} - Buch ${bookN}`, msViews, selectedViews);
        addTaxonomyIcon(panel); // Taxonomy icon
        underlineDelSpanAndAnchor(panel);
        addSpanAndAnchor(panel);
        container.appendChild(panel);
        checkLanguage();

        // show/hide columns in Structure tables
        let dropdownsStruct = container.querySelectorAll('.dropdown-structure');
        dropdownsStruct.forEach(dropdown => {
          let checkboxes = dropdown.querySelectorAll('.toggle-column');
          let table = dropdown.nextElementSibling;
          checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function () {
              let columnIndex = parseInt(checkbox.dataset.column);
              let cells = table.querySelectorAll(
                `tr > td:nth-child(${columnIndex + 1}), tr > th:nth-child(${columnIndex + 1})`
              );
              cells.forEach(cell => {
                cell.style.display = checkbox.checked ? '' : 'none';
              });
            });
          });
        });

        panel.querySelectorAll('.move-left').forEach(function (element) {
          element.addEventListener('click', function () {
            let card = $(this).closest('.card').parent();
            card.insertBefore(card.prev());
            saveResourceState();
          });
        });

        panel.querySelectorAll('.move-right').forEach(function (element) {
          element.addEventListener('click', function () {
            let card = $(this).closest('.card').parent();
            card.insertAfter(card.next());
            saveResourceState();
          });
        });

        // Delay execution to ensure Mirador can properly initialize
        setTimeout(() => {
          let windowsID = mirID + crypto.randomUUID();
          let miradorInstance = Mirador.viewer({
            id: mirID,
            language: 'de',
            window: {
              allowClose: false,
              defaultView: 'single',
              highlightAllAnnotations: true,
              panels: {
                info: true,
                attribution: true,
                canvas: true,
                annotations: true,
                search: true,
                layers: true
              },
              views: [
                { key: 'single', behaviors: ['individuals'] },
                { key: 'book', behaviors: ['paged'] }
              ]
            },
            windows: [{
              id: windowsID,
              manifestId: manifestId,
              canvasId: canvasId
            }],
            thumbnails: {
              enabled: false
            },
            catalog: catalog
          });

          // Eye icon: open the chapter in mirador
          document.querySelectorAll(".icon-chapter-mirador").forEach(function (icon) {
            icon.addEventListener("click", function () {
              let thisCanvasId = icon.parentNode.getAttribute("data-canvas").split("#")[0];
              let thisResourcePanel = $(this).closest('.resource-panel-item');
              let thisMiradorWindow = thisResourcePanel.find('.mirador-window');
              let thisWindowId = thisMiradorWindow.attr('id');
              let action = Mirador.actions.setCanvas(thisWindowId, thisCanvasId);
              miradorInstance.store.dispatch(action);
            });
          });

          saveResourceState();
          adjustPanelWidth();
          resolve();
        }, 200);
      } else {
        //fallback: don’t break if scribe file is missing
        console.warn("One or more resource files could not be loaded for", book);
        resolve();
      }
    });
  }


 /*New version to prevent books to be uploaded multiple times*/
 async function appendBooks(container, books) {
  for (let book of books) {
    // Check if this book is already on the workspace
    const existing = container.querySelector(`[data-ms='${book.value}']`);
    
    /*if (existing) {
      console.log(`Book ${book.value} already loaded, skipping.`);
      continue; // Skip if already added
    }*/
    if (existing) {
      alert(`"${book.value}" is already displayed on your workspace.`);
      continue;// Skip if already added
    }

    let selectedViews = [true, false, true, false, false];
    await initializeMirador(container, book.value, selectedViews);
  }
}


      
  function createResourcePanel(idVal, title, views, selectedViews) {
    //create the list of resources open on the desktop
    $("#resourcesUnorderedList").append("<li for='"+idVal+"'>"+title+" <button class='btn btn-sm btn-light' onclick='removeListItem(\"" + idVal + "\")'><i class='fa-solid fa-xmark' style='color: #636363;'></i></button>" + "</li>")
    
    const panel = document.createElement('div');
    panel.classList.add('resource-panel-item');
    panel.setAttribute('data-ms', idVal);
    const panelContent = `
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center fw-bold">
          <i class="fas fa-arrow-left move-left"></i>
          <span>${title}
            <span data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="<span lang='de'>Legende zur Transkription</span><span lang='en'>Transcription Legend</span>" data-bs-custom-class="custom-tooltip">
              <button type="button" class="btn ms-2 p-0" data-bs-toggle="modal" data-bs-target="#legendModal" style="color: #46b65f;">
                <i class="fa-solid fa-circle-info fa-lg"></i>
              </button>
            </span>
          </span>
          <i class="fas fa-arrow-right move-right"></i>

          
          <div> 
            <button type="button" class="btn btn-primary btn-sm me-2 add-transcription-btn p-1"><span lang='de'>Transkription</span><span lang='en'>Transcription</span></button>
            <button type="button" class="btn btn-outline-primary btn-sm me-2 add-structure-btn p-1"><span lang='de'>Struktur</span><span lang='en'>Structure</span></button>
            <button type="button" class="btn btn-outline-primary btn-sm me-2 mirador-btn p-1"><span lang='de'>Digitalisat</span><span lang='en'>Digital copy</span></button>
            <button type="button" class="btn btn-outline-primary btn-sm me-2 scribe-btn p-1"><span lang='de'>Schreiber</span><span lang='en'>Scribe</span></button>
            <button type="button" class="btn btn-outline-primary btn-sm editor-btn p-1">Info</button>
          </div>
          <button type="button" class="btn-close" aria-label="Close"></button>
        </div>
        <div class="card-body row">
          <div class="col border m-1 transcription-col d-none" style="overflow-y: scroll; max-height: 600px; white-space: nowrap"></div>
          <div class="col border m-1 structure-col d-none" style="overflow-y: scroll; max-height: 600px; text-wrap: nowrap; padding-left:0;"></div>
          <div class="col m-1 mirador-col d-none" style="max-height: 600px;"></div>
          <div class="col border m-1 scribe-col d-none" style="overflow-y: scroll; max-height: 600px; text-wrap: wrap"></div>
          <div class="col border m-1 editor-col d-none" style="overflow-y: scroll; max-height: 600px; text-wrap: wrap"></div>
        </div>
      </div>
    `
    panel.innerHTML = panelContent;

    panel.querySelector('.transcription-col').innerHTML = views[0]
    panel.querySelector('.structure-col').innerHTML = views[1]
    panel.querySelector('.mirador-col').innerHTML = views[2]
    panel.querySelector('.scribe-col').innerHTML = views[3]
    panel.querySelector('.editor-col').innerHTML = views[4]

    /*From here Citation Link in Info Panel*/
    let manuscriptNames = {
      "Bamberg": "Bamberg, Staatsbibliothek, Can. 6",
      "Frankfurt": "Frankfurt am Main, Universitätsbibliothek Johann Christian Senckenberg, Barth. 50",
      "Köln": "Köln, Erzbischöfliche Diözesan- und Dombibliothek, Cod. 119",
      "Vatikan": {
        "Va2": "Vatikan, Biblioteca Apostolica Vaticana, Pal. lat. 585",
        "Va3": "Vatikan, Biblioteca Apostolica Vaticana, Pal. lat. 586"
      }
    };
      // Parse manuscript info from idVal
      let [msName, msAbbr, bookN] = idVal.split('_');
      let displayName = msName;

      // Handle Vatikan with sub-IDs
      if (msName === "Vatikan") {
        displayName = manuscriptNames["Vatikan"][msAbbr] || msName;
      } else {
        displayName = manuscriptNames[msName] || msName;
      }

      let citationUrl = "https://burchards-dekret-digital.de/html/desktop.html#" + idVal;
      let citationText = `Burchards Dekret Digital, Akademie der Wissenschaften und der Literatur Mainz, 2025. ${displayName}, Transkription Buch ${bookN} (${citationUrl})`;
      let citationBlock = `
        <hr class="mt-0">
        <p>
          <strong><span lang="de">Zitiervorschlag</span><span lang="en">How to cite</span>:</strong> Burchards Dekret Digital, Akademie der Wissenschaften und der Literatur Mainz, 2025.
          <i>${displayName},</i> <span lang="de">Transkription</span><span lang="en">Transcription</span> <a href="${citationUrl}" target="_blank"><span lang="de">Buch</span><span lang="en">Book</span> ${bookN}</a>.
          
        </p>
        <button class="btn btn-sm btn-outline-secondary mt-2 mb-5 copy-citation-btn" data-citation="${citationText}">
          <span lang="de">Zitat kopieren</span><span lang="en">Copy citation</span>
        </button>
        <button class="btn btn-sm btn-outline-secondary mt-2 mb-5 copy-link-btn" data-citation="${citationUrl}">
          <span lang="de">Link kopieren</span><span lang="en">Copy link</span>
        </button>
      `;
      panel.querySelector('.editor-col').insertAdjacentHTML('beforeend', citationBlock);

    function attachCopyHandler(buttonSelector, defaultTextDe, defaultTextEn) {
      let btn = panel.querySelector(buttonSelector);
      btn.addEventListener('click', function() {
        let text = this.getAttribute('data-citation');
        navigator.clipboard.writeText(text).then(() => {
          // update both language spans
          this.querySelector('[lang="de"]').textContent = "Kopiert!";
          this.querySelector('[lang="en"]').textContent = "Copied!";
          setTimeout(() => {
            this.querySelector('[lang="de"]').textContent = defaultTextDe;
            this.querySelector('[lang="en"]').textContent = defaultTextEn;
          }, 2000);
        }).catch(err => console.error("Failed to copy citation:", err));
      });
    }

    // usage:
    attachCopyHandler('.copy-citation-btn', "Zitat kopieren", "Copy citation");
    attachCopyHandler('.copy-link-btn', "Link kopieren", "Copy link");

    /*Ends of Citation Link in Info Panel*/


    panel.querySelector('.btn-close').addEventListener('click', function() {
      let thisDataMS = panel.getAttribute("data-ms")
      $("#resourcesUnorderedList li[for='" + thisDataMS + "']").remove(); //added
      panel.remove();
      updateWelcomeMessageVisibility();
      adjustPanelWidth();
      saveResourceState(); //Save source panel status after removing one panel
    });


    let [transcriptionAdded, structureAdded, miradorAdded, scribeAdded, editorAdded] = selectedViews

    var viewsElements = panel.getElementsByClassName('col');
    const addTranscriptionBtn = panel.querySelector('.add-transcription-btn');
    const addStructureBtn = panel.querySelector('.add-structure-btn');
    const miradorBtn = panel.querySelector('.mirador-btn');
    const scribeBtn = panel.querySelector('.scribe-btn');
    const editorBtn = panel.querySelector('.editor-btn');

    if (transcriptionAdded){
        viewsElements[0].classList.remove('d-none');
        addTranscriptionBtn.classList.remove('btn-outline-primary');
        addTranscriptionBtn.classList.add('btn-primary');
    }
    if (structureAdded){
      viewsElements[1].classList.remove('d-none');
      addStructureBtn.classList.remove('btn-outline-primary');
      addStructureBtn.classList.add('btn-primary');
    }
    if (miradorAdded){
      viewsElements[2].classList.remove('d-none');
      miradorBtn.classList.remove('btn-outline-primary');
      miradorBtn.classList.add('btn-primary');
    }
    if (scribeAdded){
      viewsElements[3].classList.remove('d-none');
      scribeBtn.classList.remove('btn-outline-primary');
      scribeBtn.classList.add('btn-primary');
    }

    if (editorAdded){
      viewsElements[4].classList.remove('d-none');
      editorBtn.classList.remove('btn-outline-primary');
      editorBtn.classList.add('btn-primary');
    }

    addTranscriptionBtn.addEventListener('click', function() {
      if (!transcriptionAdded) {
        viewsElements[0].classList.remove('d-none');
        transcriptionAdded = true;
        addTranscriptionBtn.classList.remove('btn-outline-primary');
        addTranscriptionBtn.classList.add('btn-primary');
      } else {
        viewsElements[0].classList.add('d-none');
        transcriptionAdded = false;
        addTranscriptionBtn.classList.remove('btn-primary');
        addTranscriptionBtn.classList.add('btn-outline-primary');
      }
      saveResourceState(); // Save resource panel status after addition/deletion transcription
      adjustPanelWidth()
    });

    addStructureBtn.addEventListener('click', function() {
      if (!structureAdded) {
        viewsElements[1].classList.remove('d-none');
        structureAdded = true;
        addStructureBtn.classList.remove('btn-outline-primary');
        addStructureBtn.classList.add('btn-primary');
      } else {
        viewsElements[1].classList.add('d-none');
        structureAdded = false;
        addStructureBtn.classList.remove('btn-primary');
        addStructureBtn.classList.add('btn-outline-primary');
      }
      saveResourceState(); //Save resource panel status after addtion/deletion structure
      adjustPanelWidth()
    });

    miradorBtn.addEventListener('click', function() {
      if (!miradorAdded) {
        viewsElements[2].classList.remove('d-none');
        miradorAdded = true;
        miradorBtn.classList.remove('btn-outline-primary');
        miradorBtn.classList.add('btn-primary');
      } else {
        viewsElements[2].classList.add('d-none');
        miradorAdded = false;
        miradorBtn.classList.remove('btn-primary');
        miradorBtn.classList.add('btn-outline-primary');
      }
      saveResourceState(); //Save resource panel status after addtion/deletion Mirador Viewer
      adjustPanelWidth()
    });

    scribeBtn.addEventListener('click', function() {
      if (!scribeAdded) {
        viewsElements[3].classList.remove('d-none');
        scribeAdded = true;
        scribeBtn.classList.remove('btn-outline-primary');
        scribeBtn.classList.add('btn-primary');
      } else {
        viewsElements[3].classList.add('d-none');
        scribeAdded = false;
        scribeBtn.classList.remove('btn-primary');
        scribeBtn.classList.add('btn-outline-primary');
      }
      saveResourceState(); //Save resource panel status after addtion/deletion structure
      adjustPanelWidth()
    });

    editorBtn.addEventListener('click', function() {
      if (!editorAdded) {
        viewsElements[4].classList.remove('d-none');
        editorAdded = true;
        editorBtn.classList.remove('btn-outline-primary');
        editorBtn.classList.add('btn-primary');
      } else {
        viewsElements[4].classList.add('d-none');
        editorAdded = false;
        editorBtn.classList.remove('btn-primary');
        editorBtn.classList.add('btn-outline-primary');
      }
      saveResourceState(); //Save resource panel status after addtion/deletion structure
      adjustPanelWidth()
    });

    return panel;
  }


  // Add a listener for messages from ms-item
  window.addEventListener("message", receiveMessage, false);
  function receiveMessage(event) {
      if (event.origin !== window.location.origin) return;
      if (event.data) {
          // add new resource panel to desktop.html
          var selectedBook = event.data;
          appendSelectedBookToDesktop(selectedBook);
      }
  }

  async function appendSelectedBookToDesktop(selectedBook) {
    msAbbrList = {
      "B": "Bamberg",
      "F": "Frankfurt",
      "K": "Köln",
      "Va2": "Vatikan 585",
      "Va3": "Vatikan 586"
    }
    var msAbbr = selectedBook.split('-')[0];
    var bookN = selectedBook.split('-')[1];
    let book = [msAbbrList[msAbbr], msAbbr, bookN].join('_');
    let container = document.getElementById('resourcePanel'); 
    let selectedViews = [true, false, true]
    await initializeMirador(container, book, selectedViews)
  }
      
  //function to handle panel width behaviour
  function adjustPanelWidth() {
    const resourcePanel = document.getElementById('resourcePanel');
    const panels = resourcePanel.getElementsByClassName('resource-panel-item');
      Array.from(panels).forEach(panel => {
          const cardBody = panel.querySelector('.card-body');
          const hiddenDivs = cardBody.querySelectorAll('.d-none');

          if (panels.length === 1) {
              panel.classList.add('only-child', 'full-width');
          } else {
              panel.classList.remove('only-child', 'full-width', 'three-quarter-width', 'half-width');
              if (hiddenDivs.length === 3) {
                  panel.classList.add('half-width');
              } else if (hiddenDivs.length === 2) {
                  panel.classList.add('three-quarter-width');
              } else {
                  panel.classList.add('full-width');
              }
          }
      });
  }

  //Welcome message
  function updateWelcomeMessageVisibility() {
  const panel = document.getElementById("resourcePanel");
  const welcome = document.getElementById("welcomeMessage");

  if (!panel || !welcome) return;

  // If no child resource panels exist
  if (panel.children.length === 0) {
    welcome.style.display = "block";
  } else {
    welcome.style.display = "none";
  }
}


  //Activate tooltip inside Legend Modal
  document.getElementById('legendModal').addEventListener('shown.bs.modal', function () {
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('#legendModal [data-bs-toggle="tooltip"]'));

      tooltipTriggerList.forEach((tooltipTriggerEl) => {
          const tooltip = new bootstrap.Tooltip(tooltipTriggerEl, {
              html: true
          });

          tooltipTriggerEl.addEventListener('show.bs.tooltip', () => {
              const raw = tooltipTriggerEl.getAttribute('data-bs-title');
              const currentLang = localStorage.getItem('selectedLanguage') || 'en';
              const tempContainer = document.createElement('div');
              tempContainer.innerHTML = raw;

              const spans = tempContainer.querySelectorAll('span[lang]');
              spans.forEach(span => {
                  if (span.getAttribute('lang') !== currentLang) {
                      span.remove();
                  }
              });

              const thistooltip = bootstrap.Tooltip.getInstance(tooltipTriggerEl);
              thistooltip.setContent({ '.tooltip-inner': tempContainer.innerHTML });
          });
      });
  });

  //Upload json
  document.getElementById('downloadJsonBtn').addEventListener('click', function() {
    saveResourceState(); // Save resource panel status after selection
    resourceState = JSON.parse(localStorage.getItem('resourceState'));
    downloadJson(resourceState);
  });

  //Download json
  function downloadJson(data) {
    const filename = 'resources.json';
    const json = JSON.stringify(data, null, 2);
    const blob = new Blob([json], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }


  // Function to confirm deletion
  function confirmDelete() {
    return confirm("Are you sure you want to delete all content?");
  }
  // Clear all button
  document.getElementById('clearAll').addEventListener('click', function() {
  if (confirmDelete()) {
    document.getElementById('resourcePanel').innerHTML = '';
    document.getElementById('resourcesUnorderedList').innerHTML = '';
    document.getElementById('transcription-view-button').style.display = 'none';
    localStorage.removeItem('resourceState');
    
    saveResourceState();
    updateWelcomeMessageVisibility();
    adjustPanelWidth();
  }
});
</script>

 <!-- <script>
      function displayHTMLContent(htmlDoc) {
            let contentDiv = document.createElement('div');
            contentDiv.innerHTML = htmlDoc;
            let contentInfo = $(contentDiv).find("#infoSchreibtisch")
            $("#infoSchreibtisch").html(contentInfo);
            let contentInfoStyle = $(contentDiv).find("#infoStyleTranscriptions")
            $("#infoStyleTranscriptions").html(contentInfoStyle);    
            checkLanguage()
            }
});
  </script>-->

  <script>
    $(document).ready(function() {
        // Function to load HTML file
        function loadHTMLDoc(filename) {
            $.ajax({
                type: "GET",
                url: filename,
                dataType: "html",
                success: function(html) {
                    displayHTMLContent(html);
                },
                error: function(xhr, status, error) {
                    console.error("Error loading XML file:", error);
                }
            });
        }
    
        // Function to display HTML content
        function displayHTMLContent(htmlDoc) {
            let contentDiv = document.createElement('div');
            contentDiv.innerHTML = htmlDoc;
            
            let isMobile = window.matchMedia("only screen and (max-width: 768px)").matches;
    
            let contentInfo;
            /*if (isMobile) {
                contentInfo = $(contentDiv).find("#infoSchreibtischMobile");
            } else {
                contentInfo = $(contentDiv).find("#infoSchreibtisch");
            }*/
           contentInfo = $(contentDiv).find("#infoSchreibtisch");
            $("#infoSchreibtisch").html(contentInfo.html());
           
            let contentInfoStyle = $(contentDiv).find("#infoStyleTranscriptions")
            $("#infoStyleTranscriptions").html(contentInfoStyle);   
            checkLanguage();      
        }

        // Load XML file
        loadHTMLDoc("../data/texts/infoButtonsTexts.html"); // Adjust the path here
    });
    </script>
</html>