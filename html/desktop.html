<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>BDD Schreibtisch</title>
        <link rel="icon" type="image/png" href="../img/favicon.png" sizes="32x32">
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta name="google" content="notranslate"/>
        
        <!--Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        
        

        <!-- // External fonts -->
        <link href="https://fonts.googleapis.com/css?family=Cardo:400,700" rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500"/>
        
        <!-- // === Javascripts === -->
        <!-- // jquery -->
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        
        <!-- // CSS -->
        <link rel="stylesheet" type="text/css" href="../CSS/style.css" media="screen"/>
        <link rel="stylesheet" type="text/css" href="../CSS/digitaleSynopse.css" media="screen"/>
        
        <!--Fontawesome-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
        
        <script src="../js/language.js" defer></script>
        <script src="../js//digitaleSynopse.js" defer></script>

       

        <style>
                       .row {
                overflow-x: auto;
            }

            #resourcePanel {
                display: flex;
            }

            .resource-panel-item {
                flex: 0 0 auto; /* Prevent panels from growing */
                margin-right: 10px; /* Adjust margin between panels */
            }

            .resource-panel-item.only-child {
                flex: 1; /* Expand the single panel to fill the space */
            }

            .resource-panel-item.full-width {
                width: 100%;
            }

            .resource-panel-item.three-quarter-width {
                width: 75%;
            }

            .resource-panel-item.half-width {
                width: 50%;
            }



            .btn-outline-primary {
            background-color: transparent;
            color: #0d6efd;
            border-color: #0d6efd;
            }
        </style>
    </head>
    <body>

        <div id="navbar-placeholder"></div>
                
        <div id="content" class="container">
            <div class="back-button" style="margin-top:40px;">
                <button class="btn btn-outline-secondary rounded-circle hBack" type="button"><i class="fas fa-arrow-left"></i></button>
            </div>

            <h1 class="section-main-title"><span lang="de">SCHREIBTISCH</span><span lang="en">DESKTOP</span></h1>
            
            <button class="btn btn-primary" id="addResourceBtn"><span lang="de">Ressource hinzufügen</span><span lang="en">Add Resource</span></button>
            <button class="btn btn-success" id="downloadJsonBtn"><span lang="de">JSON herunterladen</span><span lang="en">Download JSON</span></button>
            <button class="btn btn-warning" id="clearAll"><span lang="de">Alle löschen</span><span lang="en">Clear all</span></button>
            
            <div class="dropdown" style="float: right;">
              <button lang="de" class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Transkriptionsansichten
              </button>
              <button lang="en" class="btn btn-primary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Transcription views
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" id="diplomatic" onclick="showElement('tei_lb')">Original</a></li>
                <li><a class="dropdown-item" href="#" id="flowing" onclick="hideElement('tei_lb'); toggleTextWrap()">Lesefassung</a></li>
                <hr/>
                <li><a class="dropdown-item" href="#" onclick="showElement('tei_abbr');hideElement('tei_expan')">Abkurzüngen anzeigen</a></li>
                <li><a class="dropdown-item" href="#" onclick="showElement('tei_expan');hideElement('tei_abbr')">Auflösungen anzeigen</a></li>
                <hr/>
                <li><a class="dropdown-item" href="#" onclick="showScribes()">Schreiber anzeigen</a></li>
                <li><a class="dropdown-item" href="#" onclick="hideScribes()">Schreiber ausblenden</a></li>
              </ul>
            </div>

            
            <div class="row mt-3 panelsWindow" style="overflow-x: auto;">
                <div class="col">
                    <div class="d-flex" id="resourcePanel"></div>
                </div>
            </div>
          


            <!-- Modal for selecting resources -->
            <div class="modal fade" id="resourceModal" tabindex="-1" aria-labelledby="resourceModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="resourceModalLabel"><span lang="de">Ressourcen auswählen</span><span lang="en">Select Resources</span></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <div class="modal-body">
                            <h6><span lang="de">JSON Hochladen</span><span lang="en">Load JSON</span></h6>
                            <input type="file" class="form-control" id="jsonFileInput" accept=".json">   
                        </div>
                        <div class="accordion" id="accordionManuscripts">
                          <div class="accordion-item">
                              <h2 class="accordion-header" id="BambergHeader">
                                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBamberg" aria-expanded="false" aria-controls="collapseBamberg">
                                  Bamberg, Staatsbibliothek, Can. 6
                                  </button>
                              </h2>
                              <div id="collapseBamberg" class="accordion-collapse collapse" aria-labelledby="BambergHeader" data-bs-parent="#accordionManuscripts">
                                  <div class="accordion-body">
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_00" id="BambergBook00">
                                          <label class="form-check-label" for="BambergBook00">
                                          Buch 00
                                          </label>
                                        </div>
                                          <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="Bamberg_B_01" id="BambergBook01">
                                              <label class="form-check-label" for="BambergBook01">
                                              Buch 01
                                              </label>
                                          </div>
                                          <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="Bamberg_B_02" id="BambergBook02">
                                              <label class="form-check-label" for="BambergBook02">
                                              Buch 02
                                              </label>
                                          </div>
                                          <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="Bamberg_B_03" id="BambergBook03">
                                              <label class="form-check-label" for="BambergBook03">
                                              Buch 03
                                              </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_04" id="BambergBook04">
                                            <label class="form-check-label" for="BambergBook04">
                                            Buch 04
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_05" id="BambergBook05">
                                            <label class="form-check-label" for="BambergBook05">
                                            Buch 05
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_06" id="BambergBook06">
                                            <label class="form-check-label" for="BambergBook06">
                                            Buch 06
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_07" id="BambergBook07">
                                            <label class="form-check-label" for="BambergBook07">
                                            Buch 07
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_08" id="BambergBook08">
                                            <label class="form-check-label" for="BambergBook08">
                                            Buch 08
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_09" id="BambergBook09">
                                            <label class="form-check-label" for="BambergBook09">
                                            Buch 09
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Bamberg_B_10" id="BambergBook10">
                                            <label class="form-check-label" for="BambergBook10">
                                            Buch 10
                                            </label>
                                          </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_11" id="BambergBook11">
                                          <label class="form-check-label" for="BambergBook11">
                                          Buch 11
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_012" id="BambergBook12">
                                          <label class="form-check-label" for="BambergBook12">
                                          Buch 12
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_13" id="BambergBook13">
                                          <label class="form-check-label" for="BambergBook13">
                                          Buch 13
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_14" id="BambergBook14">
                                          <label class="form-check-label" for="BambergBook14">
                                          Buch 14
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_15" id="BambergBook15">
                                          <label class="form-check-label" for="BambergBook15">
                                          Buch 15
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_16" id="BambergBook16">
                                          <label class="form-check-label" for="BambergBook16">
                                          Buch 16
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_17" id="BambergBook17">
                                          <label class="form-check-label" for="BambergBook17">
                                          Buch 17
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_18" id="BambergBook18">
                                          <label class="form-check-label" for="BambergBook18">
                                          Buch 18
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_19" id="BambergBook19">
                                          <label class="form-check-label" for="BambergBook19">
                                          Buch 19
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Bamberg_B_20" id="BambergBook20">
                                          <label class="form-check-label" for="BambergBook20">
                                          Buch 20
                                          </label>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                              </div>
                          </div>
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="FrankfurtHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFrankfurt" aria-expanded="false" aria-controls="collapseFrankfurt">
                                Frankfurt am Main, Stadt - und Universitätsbibliothek, Barth. 50
                                </button>
                            </h2>
                            <div id="collapseFrankfurt" class="accordion-collapse collapse" aria-labelledby="FrankfurtHeader" data-bs-parent="#accordionManuscripts">
                                <div class="accordion-body">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_00" id="FrankfurtBook00">
                                        <label class="form-check-label" for="FrankfurtBook0">
                                        Buch 00
                                        </label>
                                      </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Frankfurt_F_01" id="FrankfurtBook01">
                                            <label class="form-check-label" for="FrankfurtBook01">
                                            Buch 01
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Frankfurt_F_02" id="FrankfurtBook02">
                                            <label class="form-check-label" for="FrankfurtBook02">
                                            Buch 02
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Frankfurt_F_03" id="FrankfurtBook03">
                                            <label class="form-check-label" for="FrankfurtBook03">
                                            Buch 03
                                            </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_04" id="FrankfurtBook04">
                                          <label class="form-check-label" for="FrankfurtBook04">
                                          Buch 04
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_05" id="FrankfurtBook05">
                                          <label class="form-check-label" for="FrankfurtBook05">
                                          Buch 05
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_06" id="FrankfurtBook06">
                                          <label class="form-check-label" for="FrankfurtBook06">
                                          Buch 06
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_07" id="FrankfurtBook07">
                                          <label class="form-check-label" for="FrankfurtBook07">
                                          Buch 07
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_08" id="FrankfurtBook08">
                                          <label class="form-check-label" for="FrankfurtBook08">
                                          Buch 08
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_09" id="FrankfurtBook09">
                                          <label class="form-check-label" for="FrankfurtBook09">
                                          Buch 09
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Frankfurt_F_10" id="FrankfurtBook10">
                                          <label class="form-check-label" for="FrankfurtBook10">
                                          Buch 10
                                          </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_11" id="FrankfurtBook11">
                                        <label class="form-check-label" for="FrankfurtBook11">
                                        Buch 11
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_12" id="FrankfurtBook12">
                                        <label class="form-check-label" for="FrankfurtBook12">
                                        Buch 12
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_13" id="FrankfurtBook13">
                                        <label class="form-check-label" for="FrankfurtBook13">
                                        Buch 13
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_14" id="FrankfurtBook14">
                                        <label class="form-check-label" for="FrankfurtBook14">
                                        Buch 14
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_15" id="FrankfurtBook15">
                                        <label class="form-check-label" for="FrankfurtBook15">
                                        Buch 15
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_16" id="FrankfurtBook16">
                                        <label class="form-check-label" for="FrankfurtBook16">
                                        Buch 16
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_17" id="FrankfurtBook17">
                                        <label class="form-check-label" for="FrankfurtBook17">
                                        Buch 17
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_18" id="FrankfurtBook18">
                                        <label class="form-check-label" for="FrankfurtBook18">
                                        Buch 18
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_19" id="FrankfurtBook19">
                                        <label class="form-check-label" for="FrankfurtBook19">
                                        Buch 19
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Frankfurt_F_20" id="FrankfurtBook20">
                                        <label class="form-check-label" for="FrankfurtBook20">
                                        Buch 20
                                        </label>
                                      </div>
                                    </div>
                                  </div> 
                                </div>
                            </div>
                          </div>
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="KölnHeader">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseKöln" aria-expanded="false" aria-controls="collapseKöln">
                                  Köln, Erzbischöfliche Diözesan- und Dombibliothek, Cod. 119
                                </button>
                            </h2>
                            <div id="collapseKöln" class="accordion-collapse collapse" aria-labelledby="KölnHeader" data-bs-parent="#accordionManuscripts">
                                <div class="accordion-body">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_00" id="KölnBook00">
                                        <label class="form-check-label" for="KölnBook00">
                                        Buch 00
                                        </label>
                                      </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Köln_K_01" id="KölnBook01">
                                            <label class="form-check-label" for="KölnBook01">
                                            Buch 01
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Köln_K_02" id="KölnBook02">
                                            <label class="form-check-label" for="KölnBook02">
                                            Buch 02
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="Köln_K_03" id="KölnBook03">
                                            <label class="form-check-label" for="KölnBook03">
                                            Buch 03
                                            </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_04" id="KölnBook04">
                                          <label class="form-check-label" for="KölnBook04">
                                          Buch 04
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_05" id="KölnBook05">
                                          <label class="form-check-label" for="KölnBook05">
                                          Buch 05
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_06" id="KölnBook06">
                                          <label class="form-check-label" for="KölnBook06">
                                          Buch 06
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_07" id="KölnBook07">
                                          <label class="form-check-label" for="KölnBook07">
                                          Buch 07
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_08" id="KölnBook08">
                                          <label class="form-check-label" for="KölnBook08">
                                          Buch 08
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_09" id="KölnBook09">
                                          <label class="form-check-label" for="KölnBook09">
                                          Buch 09
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Köln_K_10" id="KölnBook10">
                                          <label class="form-check-label" for="KölnBook10">
                                          Buch 10
                                          </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_11" id="KölnBook11">
                                        <label class="form-check-label" for="KölnBook11">
                                        Buch 11
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_12" id="KölnBook12">
                                        <label class="form-check-label" for="KölnBook12">
                                        Buch 12
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_13" id="KölnBook13">
                                        <label class="form-check-label" for="KölnBook13">
                                        Buch 13
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_14" id="KölnBook14">
                                        <label class="form-check-label" for="KölnBook14">
                                        Buch 14
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_15" id="KölnBook15">
                                        <label class="form-check-label" for="KölnBook15">
                                        Buch 15
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_16" id="KölnBook16">
                                        <label class="form-check-label" for="KölnBook16">
                                        Buch 16
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_17" id="KölnBook17">
                                        <label class="form-check-label" for="KölnBook17">
                                        Buch 17
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_18" id="KölnBook18">
                                        <label class="form-check-label" for="KölnBook18">
                                        Buch 18
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_19" id="KölnBook19">
                                        <label class="form-check-label" for="KölnBook19">
                                        Buch 19
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Köln_K_20" id="KölnBook20">
                                        <label class="form-check-label" for="KölnBook20">
                                        Buch 20
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                          </div>
                          <div class="accordion-item">
                            <h2 class="accordion-header" id="Vatikan1Header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVatikan1" aria-expanded="false" aria-controls="collapseVatikan1">
                                  Vatikanstadt (V1), Biblioteca Apostolica Vaticana, Pal. Lat. 585
                                </button>
                            </h2>
                            <div id="collapseVatikan1" class="accordion-collapse collapse" aria-labelledby="Vatikan1Header" data-bs-parent="#accordionManuscripts">
                                <div class="accordion-body">
                                  <div class="row">
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_00" id="Vatikan1Book00">
                                        <label class="form-check-label" for="Vatikan1Book00">
                                        Buch 00
                                        </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_01" id="Vatikan1Book01">
                                          <label class="form-check-label" for="Vatikan1Book01">
                                          Buch 01
                                          </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_02" id="Vatikan1Book02">
                                          <label class="form-check-label" for="Vatikan1Book02">
                                          Buch 02
                                          </label>
                                      </div>
                                      <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_03" id="Vatikan1Book03">
                                          <label class="form-check-label" for="Vatikan1Book03">
                                          Buch 03
                                          </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_04" id="Vatikan1Book04">
                                        <label class="form-check-label" for="Vatikan1Book04">
                                        Buch 04
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_05" id="Vatikan1Book05">
                                        <label class="form-check-label" for="Vatikan1Book05">
                                        Buch 05
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_06" id="Vatikan1Book06">
                                        <label class="form-check-label" for="Vatikan1Book06">
                                        Buch 06
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_07" id="Vatikan1Book07">
                                        <label class="form-check-label" for="Vatikan1Book07">
                                        Buch 07
                                        </label>
                                      </div>
                                      <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="Vatikanstadt 585_V1_08" id="Vatikan1Book08">
                                        <label class="form-check-label" for="Vatikan1Book08">
                                        Buch 08
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                            </div>
                          </div>
                          <div class="accordion-item">
                              <h2 class="accordion-header" id="Vatikan2Header">
                                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseVatikan2" aria-expanded="false" aria-controls="collapseVatikan2">
                                    Vatikanstadt (V2), Biblioteca Apostolica Vaticana, Pal. Lat. 586
                                  </button>
                              </h2>
                              <div id="collapseVatikan2" class="accordion-collapse collapse" aria-labelledby="Vatikan2Header" data-bs-parent="#accordionManuscripts">
                                  <div class="accordion-body">
                                    <div class="row">
                                      <div class="col-md-6">
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_09" id="Vatikan2Book09">
                                          <label class="form-check-label" for="Vatikan2Book09">
                                          Buch 09
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_10" id="Vatikan2Book10">
                                          <label class="form-check-label" for="Vatikan2Book10">
                                          Buch 10
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_11" id="Vatikan2Book11">
                                          <label class="form-check-label" for="Vatikan2Book11">
                                          Buch 11
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_12" id="Vatikan2Book12">
                                          <label class="form-check-label" for="Vatikan2Book12">
                                          Buch 12
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_13" id="Vatikan2Book13">
                                          <label class="form-check-label" for="Vatikan2Book13">
                                          Buch 13
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_14" id="Vatikan2Book14">
                                          <label class="form-check-label" for="Vatikan2Book14">
                                          Buch 14
                                          </label>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_15" id="Vatikan2Book15">
                                          <label class="form-check-label" for="Vatikan2Book15">
                                          Buch 15
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_16" id="Vatikan2Book16">
                                          <label class="form-check-label" for="Vatikan2Book16">
                                          Buch 16
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_17" id="Vatikan2Book17">
                                          <label class="form-check-label" for="Vatikan2Book17">
                                          Buch 17
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_18" id="Vatikan2Book18">
                                          <label class="form-check-label" for="Vatikan2Book18">
                                          Buch 18
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_19" id="Vatikan2Book19">
                                          <label class="form-check-label" for="Vatikan2Book19">
                                          Buch 19
                                          </label>
                                        </div>
                                        <div class="form-check">
                                          <input class="form-check-input" type="checkbox" value="Vatikanstadt 586_V2_20" id="Vatikan2Book20">
                                          <label class="form-check-label" for="Vatikan2Book20">
                                          Buch 20
                                          </label>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                              </div>
                          </div>
                          
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><span lang="de">Schließen</span><span lang="en">Close</span></button>
                        <button type="button" class="btn btn-primary" id="confirmSelectionBtn"><span lang="de">Auswahl bestätigen</span><span lang="en">Confirm Selection</span></button>
                      </div>
                  </div>
                </div>
            </div>

        </div>

        <div id="footer-placeholder"></div>
        
    </body>

    <script>
      /* document.addEventListener("visibilitychange", function() {
          if (document.visibilityState === 'visible') {
              // Page is visible, reload
              location.reload();
          }
      });*/

      //Display Navbar with active item 
      $(function() {
          function setActiveNavItem() {
              var path = window.location.pathname; 
              var currentPage = path.split("/").pop();
              $(".nav-item a").removeClass("active");
              
              $(".nav-item a").each(function() {
                  var href = $(this).attr("href");
                  if (href && currentPage === href.split("/").pop()) {
                      $(this).addClass("active");
                  }
              });
          }

          $("#navbar-placeholder").load("navbar.html", function() {
              setActiveNavItem();
              checkLanguage();
          });
      });
    //Display Footer
        $(function(){
            $("#footer-placeholder").load("footer.html", function(){checkLanguage()});
        });
    //back button
        $(".hBack").on("click", function(e){
            e.preventDefault();
            window.history.back();
        });
    </script>
    
    <script>
    //open the modal to select books        
      document.getElementById('addResourceBtn').addEventListener('click', function() {
        $('#resourceModal').modal('show');

        // Deselect all checkboxes
        var checkboxes = document.querySelectorAll('#resourceModal input[type="checkbox"]');
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = false;
        });
      });

      document.getElementById('jsonFileInput').addEventListener('change', function() {
        const file = this.files[0];
        const reader = new FileReader();
        reader.onload = function(event) {
          const jsonData = JSON.parse(event.target.result);
          displayResourcesFromJson(jsonData);
          saveResourceState(); // Save resource panel status after uploading data from Json
        };
        reader.readAsText(file);
      });

      document.getElementById('confirmSelectionBtn').addEventListener('click', function() {
        $('#resourceModal').modal('hide');
        displaySelectedResources();
        adjustPanelWidth()
      });

      

      // After function displaySelectedResources() --> save resource panel status in local storage
      function saveResourceState() {
        const resourcePanels = document.querySelectorAll('.resource-panel-item');
        const resourceState = [];
        resourcePanels.forEach(panel => {
          const bookId = panel.getAttribute("data-ms");
          const view = {
            transcription: panel.querySelector('.add-transcription-btn').classList.contains('btn-primary'),
            structure: panel.querySelector('.add-structure-btn').classList.contains('btn-primary'),
            mirador: panel.querySelector('.mirador-btn').classList.contains('btn-primary')
          };
          resourceState.push({ bookId, view });
        });

        localStorage.setItem('resourceState', JSON.stringify(resourceState));
        adjustPanelWidth()
      }

      // Upload source panel status from local storage
      async function loadResourceState() {
        const resourceState = JSON.parse(localStorage.getItem('resourceState'));
        if (resourceState) {
          displayResourcesFromJson(resourceState)
        }
        adjustPanelWidth()
      }

      // Call function loadResourceState() when loading the page
      window.addEventListener('load', loadResourceState);

      async function displayResourcesFromJson(jsonData) {
        let resourcePanel = document.getElementById('resourcePanel');
        resourcePanel.innerHTML = '';
        for (resource of jsonData) {
          let [msName, msAbbr, bookN] = resource.bookId.split('_');
          let folderPath = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'.html';
          let folderPathStructure = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'structure.html';
          let response = await fetch(folderPath);
          let responseStructure = await fetch(folderPathStructure);
          if (response.ok && responseStructure.ok) {
            let msViews = []
            msViews.push(await response.text())
            msViews.push(await responseStructure.text())
            msViews.push("MIRADOR")
            //todo push mirador an structure in msViews
            let selectedViews = [false, false, false]
            if (resource.view.transcription) {
              selectedViews[0] = true
            }
            if (resource.view.structure) {
              selectedViews[1] = true
            }
            if (resource.view.mirador) {
              selectedViews[2] = true
            }
            let panel = createResourcePanel(resource.bookId, `Handschrift ${msName} - Buch ${bookN}`, msViews, selectedViews);
            resourcePanel.appendChild(panel);
            saveResourceState(); // Save resource panel status after selection
          }
        }
        adjustPanelWidth();
      }

      function displaySelectedResources() {
        const resourcePanel = document.getElementById('resourcePanel');

        const BambergBooks = document.querySelectorAll('#collapseBamberg input[type="checkbox"]:checked');
        const FrankfurtBooks = document.querySelectorAll('#collapseFrankfurt input[type="checkbox"]:checked');
        const KölnBooks = document.querySelectorAll('#collapseKöln input[type="checkbox"]:checked');
        const Vatikan1Books = document.querySelectorAll('#collapseVatikan1 input[type="checkbox"]:checked');
        const Vatikan2Books = document.querySelectorAll('#collapseVatikan2 input[type="checkbox"]:checked');

        // Add new panel without removing the ones already present
        appendBooks(resourcePanel, BambergBooks);
        appendBooks(resourcePanel, FrankfurtBooks);
        appendBooks(resourcePanel, KölnBooks);
        appendBooks(resourcePanel, Vatikan1Books);
        appendBooks(resourcePanel, Vatikan2Books);

        adjustPanelWidth();
      }


      async function appendBooks(container, books) {
        for (book of books) {
          let [msName, msAbbr, bookN] = book.value.split('_');
          let folderPath = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'.html';
          let folderPathStructure = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'structure.html';
          let response = await fetch(folderPath);
          let responseStructure = await fetch(folderPathStructure);
          if (response.ok && responseStructure.ok) {
            let msViews = []
            msViews.push(await response.text())
            msViews.push(await responseStructure.text())
            msViews.push("MIRADOR")
            //todo push mirador an structure in msViews

            let selectedViews = [true, false, false]
            let panel = createResourcePanel(book.value, `Handschrift ${msName} - Buch ${bookN}`, msViews, selectedViews);           
            container.appendChild(panel);
            saveResourceState(); // Save resource panel status after selection
            adjustPanelWidth()
          }
        };
      }
      

      function createResourcePanel(idVal, title, views, selectedViews) {
        
        const panel = document.createElement('div');
        panel.classList.add('resource-panel-item');
        panel.setAttribute('data-ms', idVal);
        const panelContent = `
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center" style="font-weight:bold">
              <span>${title}</span>
              <div>
                <button type="button" class="btn btn-primary btn-sm me-2 add-transcription-btn">Transkription</button>
                <button type="button" class="btn btn-outline-primary btn-sm me-2 add-structure-btn">Struktur</button>
                <button type="button" class="btn btn-outline-primary btn-sm mirador-btn">Mirador</button>
                
              </div>
              <button type="button" class="btn-close" aria-label="Close"></button>
            </div>
            <div class="card-body row">
              <div class="col border m-1 transcription-col d-none" style="overflow-y: scroll; max-height: 600px; white-space: nowrap"></div>
              <div class="col border m-1 structure-col d-none" style="overflow-y: scroll; max-height: 600px; text-wrap: nowrap"></div>
              <div class="col border m-1 mirador-col d-none"></div>
            </div>
          </div>
        `
        panel.innerHTML = panelContent;

        panel.querySelector('.transcription-col').innerHTML = views[0]
        panel.querySelector('.structure-col').innerHTML = views[1]
        panel.querySelector('.mirador-col').innerHTML = views[2]

        panel.querySelector('.btn-close').addEventListener('click', function() {
          panel.remove();
          adjustPanelWidth();
          saveResourceState(); //Save source panel status after removing one panel
        });

        let [transcriptionAdded, structureAdded, miradorAdded] = selectedViews

        var viewsElements = panel.getElementsByClassName('col');
        const addTranscriptionBtn = panel.querySelector('.add-transcription-btn');
        const addStructureBtn = panel.querySelector('.add-structure-btn');
        const miradorBtn = panel.querySelector('.mirador-btn');

        if (transcriptionAdded){
            viewsElements[0].classList.remove('d-none');
            addTranscriptionBtn.classList.remove('btn-outline-primary');
            addTranscriptionBtn.classList.add('btn-primary');
        }
        if (structureAdded){
          viewsElements[1].classList.remove('d-none');
          addStructureBtn.classList.remove('btn-outline-primary');
          addStructureBtn.classList.add('btn-primary');
        }
        if (miradorAdded){
          viewsElements[2].classList.remove('d-none');
          miradorBtn.classList.remove('btn-outline-primary');
          miradorBtn.classList.add('btn-primary');
        }

        addTranscriptionBtn.addEventListener('click', function() {
          if (!transcriptionAdded) {
            viewsElements[0].classList.remove('d-none');
            transcriptionAdded = true;
            addTranscriptionBtn.classList.remove('btn-outline-primary');
            addTranscriptionBtn.classList.add('btn-primary');
          } else {
            viewsElements[0].classList.add('d-none');
            transcriptionAdded = false;
            addTranscriptionBtn.classList.remove('btn-primary');
            addTranscriptionBtn.classList.add('btn-outline-primary');
          }
          saveResourceState(); // Save resource panel status after addition/deletion transcription
          adjustPanelWidth()
        });

        addStructureBtn.addEventListener('click', function() {
          if (!structureAdded) {
            viewsElements[1].classList.remove('d-none');
            structureAdded = true;
            addStructureBtn.classList.remove('btn-outline-primary');
            addStructureBtn.classList.add('btn-primary');
          } else {
            viewsElements[1].classList.add('d-none');
            structureAdded = false;
            addStructureBtn.classList.remove('btn-primary');
            addStructureBtn.classList.add('btn-outline-primary');
          }
          saveResourceState(); //Save resource panel status after addtion/deletion structure
          adjustPanelWidth()
        });

        miradorBtn.addEventListener('click', function() {
          if (!miradorAdded) {
            viewsElements[2].classList.remove('d-none');
            miradorAdded = true;
            miradorBtn.classList.remove('btn-outline-primary');
            miradorBtn.classList.add('btn-primary');
          } else {
            viewsElements[2].classList.add('d-none');
            miradorAdded = false;
            miradorBtn.classList.remove('btn-primary');
            miradorBtn.classList.add('btn-outline-primary');
          }
          saveResourceState(); //Save resource panel status after addtion/deletion Mirador Viewer
          adjustPanelWidth()
        });

        return panel;
      }


      // Add a listener for messages from ms-item
      window.addEventListener("message", receiveMessage, false);
      function receiveMessage(event) {
          if (event.origin !== window.location.origin) return;
          if (event.data) {
              // add new resource panel to desktop.html
              var selectedBook = event.data;
              console.log(selectedBook)
              appendSelectedBookToDesktop(selectedBook);
          }
      }

      async function appendSelectedBookToDesktop(selectedBook) {
        const msAbbrList = {
          "B": "Bamberg",
          "F": "Frankfurt",
          "K": "Köln",
          "V1": "Vatikan1",
          "V2": "Vatikan2"
        } 
        var msAbbr = selectedBook.split('-')[0];
        var bookN = selectedBook.split('-')[1];
        let msName = msAbbrList[msAbbr]
          let folderPath = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'.html';
          let folderPathStructure = '../data/mss/' + msAbbr + '/Tei/v1/' + bookN +'structure.html';
          let response = await fetch(folderPath);
          let responseStructure = await fetch(folderPathStructure);
          if (response.ok && responseStructure.ok) {
            let msViews = []
            msViews.push(await response.text())
            msViews.push(await responseStructure.text())
            msViews.push("MIRADOR")
            //todo push mirador and structure in msViews
            let selectedViews = [true, false, false]
            let panel = createResourcePanel(`${msName}_${msAbbr}_${bookN}`, `Handschrift ${msName} - Buch ${bookN}`, msViews, selectedViews);
            var container = document.getElementById('resourcePanel');    
            container.appendChild(panel);
            saveResourceState(); // Save resource panel status after selection
            adjustPanelWidth()
          }
      }

    //function to handle panel width behaviour
    function adjustPanelWidth() {
    const resourcePanel = document.getElementById('resourcePanel');
    const panels = resourcePanel.getElementsByClassName('resource-panel-item');
      Array.from(panels).forEach(panel => {
          const cardBody = panel.querySelector('.card-body');
          const hiddenDivs = cardBody.querySelectorAll('.d-none');

          if (panels.length === 1) {
              panel.classList.add('only-child', 'full-width');
          } else {
              panel.classList.remove('only-child', 'full-width', 'three-quarter-width', 'half-width');
              if (hiddenDivs.length === 2) {
                  panel.classList.add('half-width');
              } else if (hiddenDivs.length === 1) {
                  panel.classList.add('three-quarter-width');
              } else {
                  panel.classList.add('full-width');
              }
          }
      });
    }


      //Upload json
      document.getElementById('downloadJsonBtn').addEventListener('click', function() {
        saveResourceState(); // Save resource panel status after selection
        resourceState = JSON.parse(localStorage.getItem('resourceState'));
        downloadJson(resourceState);
      });

      //Download json
      function downloadJson(data) {
        const filename = 'resources.json';
        const json = JSON.stringify(data, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }


      //Clear all button 
      document.getElementById('clearAll').addEventListener('click', function() {
          document.getElementById('resourcePanel').innerHTML = '';
          saveResourceState()
      });

      //text-wrap:wrap
        function toggleTextWrap() {
          var transcriptionDivs = document.querySelectorAll('.transcription-col');
          transcriptionDivs.forEach(function(div) {
            if (div.style.whiteSpace === 'nowrap') {
              div.style.whiteSpace = 'normal';
            } else {
              div.style.whiteSpace = 'nowrap';
            }
          });
        }
    </script>



</html>